<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics-compat.js"></script>
  <title>SoMAp - Society Management App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    /* ==== SoMAp anti-overlap + responsive overrides ==== */
    *, *::before, *::after { box-sizing: border-box; }
    .app-header h1, .app-header .title,
    .section h1, .section h2, .section h3, .section p,
    .card, .card *,
    .stat-card, .stat-card *,
    .badge, .pill, .menu-group h3,
    .workspace .grid, .workspace .grid * {
      white-space: normal !important;
      overflow-wrap: anywhere;
      word-break: break-word;
    }
    .workspace, .section, .card, .stat-card, .grid, .row {
      min-width: 0;
    }
    .layout-row, .grid, .row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }
    .card, .stat-card {
      flex: 1 1 280px;
      min-width: 240px;
    }
    img, video, canvas {
      max-width: 100%;
      height: auto;
    }
    .workspace { margin-left: 64px; }
    @media (max-width: 768px) {
      .workspace { margin-left: 56px; }
    }
    @media (max-width: 560px) {
      .workspace { margin-left: 0; }
      .sidebar { position: fixed; transform: translateX(-100%); transition: transform .2s ease; }
      .has-sidebar-open .sidebar { transform: none; }
    }
    :root {
      --primary: #4f46e5;
      --secondary: #818cf8;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #06b6d4;
      --light-bg: #f9fafb;
      --border: #e5e7eb;
    }
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      overflow-x: hidden;
      background: linear-gradient(135deg, #007bff, #6610f2);
      color: #fff;
      min-height: 100vh;
    }
    .sidebar-icon {
      position: relative;
      transition: all 0.3s;
    }
    .sidebar-icon:hover {
      background-color: rgba(79, 70, 229, 0.1);
    }
    .sidebar-icon.active {
      background-color: var(--primary);
      color: white;
    }
    .sidebar-tooltip {
      position: absolute;
      left: 100%;
      top: 50%;
      transform: translateY(-50%);
      background: #1f2937;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      opacity: 0;
      pointer-events: none;
      transition: all 0.2s;
      z-index: 100;
      white-space: nowrap;
    }
    .sidebar-icon:hover .sidebar-tooltip {
      opacity: 1;
      transform: translateY(-50%) translateX(8px);
    }
    .module-panel {
      transition: transform 0.3s ease-in-out;
      transform: translateX(100%);
      box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
    }
    .module-panel.active {
      transform: translateX(0);
    }
    .card {
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: all 0.3s;
      background: linear-gradient(135deg, #ffffff, #e5e7eb);
      color: #000;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    .stat-card {
      transition: all 0.3s;
      background: linear-gradient(135deg, #20c997, #0dcaf0);
      color: #fff;
    }
    .stat-card:hover {
      transform: translateY(-3px);
    }
    .btn {
      transition: all 0.2s;
    }
    .btn:hover {
      transform: translateY(-1px);
    }
    .btn:active {
      transform: translateY(0);
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .fade-in {
      animation: fadeIn 0.3s ease-in-out;
    }
    .loader {
      border-top-color: var(--primary);
      animation: spinner 0.6s linear infinite;
    }
    @keyframes spinner {
      to { transform: rotate(360deg); }
    }
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #a1a1a1;
    }
    .workspace {
      flex: 1 1 auto;
      min-width: 0;
      overflow-x: hidden;
      overflow-y: auto;
      background: linear-gradient(135deg, #007bff, #6610f2);
      padding: 1rem;
      transition: margin-left 0.3s ease;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      max-width: 100%;
      word-break: break-word;
    }
    .stat-card .mt-4, .card .mt-4 {
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    @media (min-width: 1024px) {
      .grid { gap: 2rem; }
      .workspace { padding: 1.5rem; }
    }
    @media (max-width: 767px) {
      .grid { grid-template-columns: 1fr; }
      .workspace { padding: 0.5rem; }
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease-in-out;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .badge-pulse {
      animation: pulse 2s infinite;
    }
    .sidebar-logo {
      height: 40px;
      width: auto;
      max-width: 100%;
      display: block;
      margin: 0 auto;
    }
    .sidebar-expanded .sidebar-logo {
      height: 48px;
    }
    @media (max-width: 480px) {
      .sidebar-logo { height: 32px; }
    }
    .navbar {
      background: linear-gradient(135deg, #28a745, #20c997);
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    .sidebar {
      background: linear-gradient(to bottom, #fd7e14, #ffc107);
      height: 100vh;
      padding: 20px;
      position: fixed;
      width: 64px;
      overflow-y: auto;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      transition: width 0.3s ease;
    }
    .sidebar-expanded .sidebar {
      width: 250px;
    }
    .sidebar a, .sidebar button {
      color: #fff;
      text-decoration: none;
      display: block;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      transition: background 0.3s;
    }
    .sidebar a:hover, .sidebar button:hover {
      background-color: rgba(255,255,255,0.2);
    }
    .main-content {
      margin-left: 64px;
      padding: 20px;
      transition: margin-left 0.3s ease;
    }
    .sidebar-expanded .main-content {
      margin-left: 250px;
    }
    .welcome-note {
      background: linear-gradient(135deg, #6f42c1, #d63384);
      padding: 50px;
      text-align: center;
      border-radius: 20px;
      margin: 50px auto;
      max-width: 800px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }
    .market-section {
      background: linear-gradient(135deg, #dc3545, #fd7e14);
      padding: 30px;
      border-radius: 15px;
      color: #fff;
    }
    .market-img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .quick-action-btn {
      background: linear-gradient(135deg, #198754, #20c997);
      color: #fff;
      border: none;
      margin: 10px;
      padding: 15px 30px;
      border-radius: 10px;
      font-weight: bold;
      transition: opacity 0.3s;
    }
    .quick-action-btn:hover {
      opacity: 0.9;
    }
    #language-select {
      margin: 20px auto;
      width: 200px;
      background: #fff;
      color: #000;
      border: 2px solid #ced4da;
      border-radius: 10px;
    }
    .events-list {
      list-style: none;
      padding: 0;
    }
    .events-list li {
      background: #fff;
      color: #000;
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .chart-container {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 20px;
    }
    .footer {
      background-color: #343a40;
      color: #fff;
      padding: 20px;
      text-align: center;
      margin-top: 50px;
      border-top: 2px solid #fff;
    }
    .role-specific {
      display: none;
    }
    .module-section {
      background: linear-gradient(135deg, #ffc107, #fd7e14);
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      color: #000;
    }
    .attendance-trends {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
    }
    .discipline-card {
      background: linear-gradient(135deg, #dc3545, #f55);
    }
    .finance-overview {
      background: linear-gradient(135deg, #28a745, #198754);
    }
    .resource-card {
      background: linear-gradient(135deg, #0dcaf0, #20c997);
    }
    .communication-stats {
      background: linear-gradient(135deg, #6610f2, #6f42c1);
    }
    .ai-insights {
      background: linear-gradient(135deg, #d63384, #dc3545);
      color: #fff;
    }
    .volunteer-section {
      background: linear-gradient(135deg, #ffc107, #ffca2c);
    }
    .calendar {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
    }
    .hidden {
      display: none;
    }
    .btn-custom {
      background-color: #6f42c1;
      color: #fff;
      border-radius: 50px;
      padding: 10px 20px;
    }
    .form-control-custom {
      border-radius: 10px;
      border: 2px solid #ced4da;
    }
    h1, h2, h3, h4, h5, h6 {
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
    .card h5, .card p, .events-list li {
      color: #000;
      text-shadow: none;
    }
    p {
      line-height: 1.6;
    }
    .img-fluid {
      border-radius: 10px;
    }
    .section-padding {
      padding: 40px 0;
    }
    .card-body {
      padding: 20px;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-500 to-purple-600">
  <div class="flex h-screen overflow-hidden">
    <!-- Sidebar -->
    <div id="sidebar" class="flex flex-col h-full bg-gradient-to-b from-orange-500 to-yellow-400 shadow-md p-1 relative z-10" style="width: 64px; transition: width 0.3s ease;">
      <div class="flex items-center justify-center h-14 mb-2">
        <img src="images/somap-logo.png.jpg" alt="SoMAp Logo" class="sidebar-logo">
      </div>
      <div class="flex-1 overflow-y-auto">
        <div class="flex flex-col space-y-1">
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto active" data-module="dashboard">
            <i class="fas fa-th-large text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-dashboard">Dashboard</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-dashboard-expanded">Dashboard</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="erp">
            <i class="fas fa-user-graduate text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-academic">Academic</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-academic-expanded">Academic</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="finance">
            <i class="fas fa-money-bill-wave text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-finance">Finance</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-finance-expanded">Finance</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="library">
            <i class="fas fa-book text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-resources">Digital Library</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-resources-expanded">Digital Library</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="communication">
            <i class="fas fa-comment-alt text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-communications">Communications</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-communications-expanded">Communications</span>
            <span class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center badge-pulse">5</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="marketplace">
            <i class="fas fa-store text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-market">Marketplace</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-market-expanded">Marketplace</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="sponsorship">
            <i class="fas fa-hand-holding-heart text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-sponsorship">Sponsorship</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-sponsorship-expanded">Sponsorship</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="ai">
            <i class="fas fa-robot text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-ai-insights">AI Insights</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-ai-insights-expanded">AI Insights</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="volunteer">
            <i class="fas fa-people-carry text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-volunteers">Volunteers</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-volunteers-expanded">Volunteers</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto" data-module="events">
            <i class="fas fa-calendar-alt text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-events">Events</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-events-expanded">Events</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto role-specific admin-only" data-module="admin-tools">
            <i class="fas fa-tools text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-admin-tools">Admin Tools</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-admin-tools-expanded">Admin Tools</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto role-specific teacher-only" data-module="class-tools">
            <i class="fas fa-chalkboard-teacher text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-class-tools">Class Tools</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-class-tools-expanded">Class Tools</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto role-specific accountant-only" data-module="finance-tools">
            <i class="fas fa-calculator text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-finance-tools">Finance Tools</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-finance-tools-expanded">Finance Tools</span>
          </button>
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto role-specific parent-only" data-module="child-info">
            <i class="fas fa-child text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-child-info">Child Info</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-child-info-expanded">Child Info</span>
          </button>
          <button id="logout" class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto">
            <i class="fas fa-sign-out-alt text-xl"></i>
            <span class="sidebar-tooltip" id="sidebar-logout">Logout</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium" id="sidebar-logout-expanded">Logout</span>
          </button>
        </div>
      </div>
      <div class="mt-2 mb-1">
        <button id="toggle-sidebar" class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto">
          <i class="fas fa-chevron-right text-sm sidebar-collapsed"></i>
          <i class="fas fa-chevron-left text-sm sidebar-expanded hidden"></i>
          <span class="sidebar-tooltip">Toggle Menu</span>
        </button>
        <div class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-white mx-auto mt-1">
          <img src="https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png" alt="Profile" class="rounded-full h-8 w-8 object-cover">
          <span class="sidebar-tooltip">Profile</span>
          <span class="sidebar-expanded hidden ml-3 text-sm font-medium">Admin</span>
        </div>
      </div>
    </div>
    <!-- Main workspace -->
    <div class="workspace flex-1 min-w-0 overflow-x-hidden overflow-y-auto bg-gradient-to-br from-blue-500 to-purple-600 transition-all">
      <header class="bg-white shadow-sm">
        <div class="flex items-center justify-between px-6 py-3">
          <div>
            <h1 id="page-title" class="text-xl font-semibold text-gray-800">SoMAp - SOCIETY MANAGEMENT APP</h1>
          </div>
          <div class="flex items-center space-x-4">
            <div class="relative">
              <input type="text" class="px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-indigo-500 w-64" placeholder="Search...">
              <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
            </div>
            <button class="p-2 rounded-lg hover:bg-gray-100">
              <i class="far fa-bell text-gray-500 relative">
                <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
              </i>
            </button>
            <button class="p-2 rounded-lg hover:bg-gray-100">
              <i class="fas fa-cog text-gray-500"></i>
            </button>
          </div>
        </div>
      </header>
      <!-- Module Detail Panel -->
      <div id="module-panel" class="module-panel fixed top-0 right-0 h-full bg-white shadow-lg w-96 z-20 overflow-y-auto">
        <div class="p-5">
          <div class="flex items-center justify-between mb-4">
            <h2 id="module-title" class="text-xl font-bold text-gray-800">Module Details</h2>
            <button id="close-module" class="text-gray-500 hover:text-gray-800">
              <i class="fas fa-times text-lg"></i>
            </button>
          </div>
          <div id="module-content" class="pb-5"></div>
        </div>
      </div>
      <!-- Module templates -->
      <div id="module-templates" class="hidden">
        <div id="library-template">
          <div class="mb-4">
            <div class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm mb-4">
              Access and manage digital educational resources for students and teachers.
            </div>
            <div class="flex border-b mb-4">
              <button class="library-tab px-4 py-2 font-medium border-b-2 border-indigo-500 text-indigo-600 active" data-tab="resources">Resources</button>
              <button class="library-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="upload">Upload</button>
              <button class="library-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="categories">Categories</button>
            </div>
            <div class="library-tab-content active" data-tab="resources">
              <div class="mb-3">
                <div class="relative">
                  <input type="text" placeholder="Search resources..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                  <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
                <div class="flex flex-wrap gap-2 mt-2">
                  <span class="px-2 py-1 bg-gray-100 text-xs text-gray-700 rounded-full">All</span>
                  <span class="px-2 py-1 bg-indigo-100 text-xs text-indigo-700 rounded-full">Science</span>
                  <span class="px-2 py-1 bg-gray-100 text-xs text-gray-700 rounded-full">Mathematics</span>
                  <span class="px-2 py-1 bg-gray-100 text-xs text-gray-700 rounded-full">Languages</span>
                  <span class="px-2 py-1 bg-gray-100 text-xs text-gray-700 rounded-full">History</span>
                </div>
              </div>
              <div class="space-y-3">
                <div class="bg-white rounded-lg shadow p-4">
                  <div class="flex justify-between items-start">
                    <div>
                      <div class="flex items-center mb-1">
                        <span class="bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded mr-2">Science</span>
                        <span class="text-gray-500 text-xs">Grade 9-10</span>
                      </div>
                      <h3 class="font-medium text-gray-800">Introduction to Cell Biology</h3>
                      <p class="text-sm text-gray-600 mt-1">Comprehensive study guide with diagrams and examples.</p>
                    </div>
                    <div class="flex">
                      <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200">
                        <i class="fas fa-download text-sm"></i>
                      </button>
                    </div>
                  </div>
                  <div class="flex justify-between mt-3 text-xs text-gray-500">
                    <span>PDF • 2.4 MB</span>
                    <span>Updated 2 weeks ago</span>
                  </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                  <div class="flex justify-between items-start">
                    <div>
                      <div class="flex items-center mb-1">
                        <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded mr-2">Mathematics</span>
                        <span class="text-gray-500 text-xs">Grade 7-8</span>
                      </div>
                      <h3 class="font-medium text-gray-800">Algebra Practice Problems</h3>
                      <p class="text-sm text-gray-600 mt-1">Collection of practice problems with solutions.</p>
                    </div>
                    <div class="flex">
                      <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200">
                        <i class="fas fa-download text-sm"></i>
                      </button>
                    </div>
                  </div>
                  <div class="flex justify-between mt-3 text-xs text-gray-500">
                    <span>PDF • 1.8 MB</span>
                    <span>Updated 1 month ago</span>
                  </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                  <div class="flex justify-between items-start">
                    <div>
                      <div class="flex items-center mb-1">
                        <span class="bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded mr-2">History</span>
                        <span class="text-gray-500 text-xs">Grade 8-10</span>
                      </div>
                      <h3 class="font-medium text-gray-800">Colonial History in Africa</h3>
                      <p class="text-sm text-gray-600 mt-1">Interactive multimedia presentation with narration.</p>
                    </div>
                    <div class="flex">
                      <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200">
                        <i class="fas fa-play text-sm"></i>
                      </button>
                    </div>
                  </div>
                  <div class="flex justify-between mt-3 text-xs text-gray-500">
                    <span>Video • 15:24 min</span>
                    <span>Added 2 months ago</span>
                  </div>
                </div>
                <a href="javascript:void(0)" class="block text-center text-indigo-600 hover:underline text-sm pt-2">View all resources</a>
              </div>
            </div>
            <div class="library-tab-content" data-tab="upload">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800 mb-3">Upload New Resource</h3>
                <form class="space-y-3">
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Title</label>
                    <input type="text" placeholder="Resource title" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                  </div>
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Subject Category</label>
                    <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                      <option>Mathematics</option>
                      <option>Science</option>
                      <option>Languages</option>
                      <option>History</option>
                      <option>Geography</option>
                      <option>Art</option>
                      <option>Physical Education</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Grade Level</label>
                    <div class="flex flex-wrap gap-2">
                      <label class="inline-flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600">
                        <span class="ml-1 text-sm">Grade 1-3</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600">
                        <span class="ml-1 text-sm">Grade 4-6</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600">
                        <span class="ml-1 text-sm">Grade 7-8</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600">
                        <span class="ml-1 text-sm">Grade 9-10</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600">
                        <span class="ml-1 text-sm">Grade 11-12</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Description</label>
                    <textarea rows="2" placeholder="Brief description" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                  </div>
                  <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                    <i class="fas fa-cloud-upload-alt text-gray-400 text-3xl mb-2"></i>
                    <p class="text-sm text-gray-500">Drag and drop files here, or click to browse</p>
                    <p class="text-xs text-gray-400 mt-1">Supports: PDF, DOCX, PPTX, MP4, JPG, PNG (max 50MB)</p>
                    <button type="button" class="mt-3 px-4 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm">Select Files</button>
                  </div>
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Access Permissions</label>
                    <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                      <option>All students and teachers</option>
                      <option>Teachers only</option>
                      <option>Specific classes only</option>
                      <option>Admin only</option>
                    </select>
                  </div>
                  <button type="button" class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Upload Resource</button>
                </form>
              </div>
            </div>
            <div class="library-tab-content" data-tab="categories">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800 mb-3">Manage Categories</h3>
                <ul class="space-y-2">
                  <li class="flex justify-between items-center">
                    <span>Mathematics</span>
                    <button class="text-indigo-600 hover:text-indigo-800 text-sm">Edit</button>
                  </li>
                  <li class="flex justify-between items-center">
                    <span>Science</span>
                    <button class="text-indigo-600 hover:text-indigo-800 text-sm">Edit</button>
                  </li>
                  <li class="flex justify-between items-center">
                    <span>Languages</span>
                    <button class="text-indigo-600 hover:text-indigo-800 text-sm">Edit</button>
                  </li>
                  <li class="flex justify-between items-center">
                    <span>History</span>
                    <button class="text-indigo-600 hover:text-indigo-800 text-sm">Edit</button>
                  </li>
                </ul>
                <button class="mt-3 w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Add Category</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Welcome Page -->
      <div id="welcome-page" class="container section-padding">
        <div class="welcome-note">
          <h1 id="welcome-title">Welcome to SoMAp</h1>
          <p id="welcome-text">Welcome to SoMAp — your Educational SuperApp. Manage academics, finances, health, and marketplace with speed and simplicity.</p>
          <select id="language-select" class="form-select form-control-custom">
            <option value="en">English</option>
            <option value="sw">Swahili</option>
          </select>
          <button id="get-started" class="btn btn-lg btn-custom">Get Started</button>
        </div>
      </div>
      <!-- Login Page -->
      <div id="login-page" class="container section-padding hidden">
        <div class="card p-4">
          <h2 class="text-center">Sign In to SoMAp</h2>
          <div class="space-y-3">
            <div>
              <label for="email" class="block text-sm text-gray-600 mb-1">Email</label>
              <input type="email" class="form-control form-control-custom w-full" id="email" required>
            </div>
            <div>
              <label for="password" class="block text-sm text-gray-600 mb-1">Password</label>
              <input type="password" class="form-control form-control-custom w-full" id="password" required>
            </div>
            <div>
              <label for="role" class="block text-sm text-gray-600 mb-1">Role</label>
              <select id="role" class="form-select form-control-custom w-full">
                <option value="parent">Parent</option>
                <option value="staff">Staff/Teacher</option>
                <option value="admin">Admin</option>
                <option value="accountant">Accountant</option>
              </select>
            </div>
            <div id="parent-phone" class="hidden">
              <label for="phone" class="block text-sm text-gray-600 mb-1">Phone Number (for Parents)</label>
              <input type="tel" class="form-control form-control-custom w-full" id="phone" placeholder="+255...">
            </div>
            <button id="login-submit" class="btn btn-success btn-lg w-full">Sign In</button>
            <hr class="my-3">
            <button id="google-signin" class="btn btn-danger btn-lg w-full mb-2">Sign In with Google</button>
            <button id="github-signin" class="btn btn-dark btn-lg w-full">Sign In with GitHub</button>
          </div>
        </div>
      </div>
      <!-- Main Dashboard -->
      <div id="main-dashboard" class="hidden">
        <div class="main-content">
          <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
              <a class="navbar-brand text-white" href="#">SoMAp Dashboard</a>
              <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                  <li class="nav-item"><a class="nav-link text-white" href="#market">SoMAp Market</a></li>
                  <li class="nav-item"><a class="nav-link text-white" href="#schools">Schools</a></li>
                </ul>
              </div>
            </div>
          </nav>
          <section id="dashboard" class="section-padding">
            <h2>Dashboard Overview</h2>
            <div class="grid">
              <div class="card stat-card">
                <div class="card-body">
                  <h5>Total Students</h5>
                  <p id="total-students">1,257 <small>5.2% Since last month</small></p>
                </div>
              </div>
              <div class="card stat-card">
                <div class="card-body">
                  <h5>Fee Collection</h5>
                  <p id="fee-collection">$246,300 <small>8.4% Since last month</small></p>
                </div>
              </div>
              <div class="card stat-card">
                <div class="card-body">
                  <h5>Attendance Rate</h5>
                  <p id="attendance-rate">94.2% <small>1.5% Since last month</small></p>
                </div>
              </div>
              <div class="card stat-card">
                <div class="card-body">
                  <h5>Upcoming Events</h5>
                  <p id="upcoming-events">7 <small>2 new This week</small></p>
                </div>
              </div>
            </div>
          </section>
          <section id="activities" class="module-section">
            <h2>Recent Activities</h2>
            <ul class="events-list" id="activities-list">
              <li>John Doe marked attendance for Class 8A - 2 hours ago</li>
              <li>Maria Johnson paid $450 for Term 2 fees - 4 hours ago</li>
              <li>Ms. Williams uploaded science materials for Class 7 - Yesterday at 4:30 PM</li>
              <li>Admin created Sports Day event for June 15th - Yesterday at 2:15 PM</li>
            </ul>
            <button class="btn quick-action-btn">View All</button>
          </section>
          <section id="upcoming-events" class="module-section">
            <h2>Upcoming Events</h2>
            <ul class="events-list" id="events-list">
              <li>15 JUN - Annual Sports Day - 9:00 AM - 4:00 PM • School Grounds</li>
              <li>20 JUN - Parent-Teacher Meeting - 2:00 PM - 5:00 PM • Main Hall</li>
              <li>28 JUN - Science Fair - 10:00 AM - 2:00 PM • Science Block</li>
              <li>05 JUL - End of Term Ceremony - 12:00 PM - 3:00 PM • Assembly Hall</li>
            </ul>
            <button class="btn quick-action-btn">View Calendar</button>
          </section>
          <section id="academic" class="module-section hidden">
            <h2>Academic Management</h2>
            <div class="grid">
              <div class="card">
                <div class="card-body">
                  <h5>Class Assignment</h5>
                  <p>Manage student class assignments. Assign students to classes.</p>
                  <button class="btn quick-action-btn role-specific teacher-only admin-only">Assign Students</button>
                </div>
              </div>
              <div class="card">
                <div class="card-body">
                  <h5>Timetables</h5>
                  <p>Create and manage school timetables.</p>
                  <button class="btn quick-action-btn role-specific admin-only">Create Timetable</button>
                </div>
              </div>
              <div class="card">
                <div class="card-body">
                  <h5>Exam Management</h5>
                  <p>Schedule and manage examinations. Term 2 Exams Upcoming.</p>
                  <button class="btn quick-action-btn role-specific admin-only">Schedule Exam</button>
                </div>
              </div>
            </div>
          </section>
          <section id="attendance" class="module-section hidden">
            <h2>Attendance</h2>
            <div class="grid">
              <div class="card attendance-trends">
                <h5>Today's Attendance</h5>
                <p>Present: 457 Absent: 23</p>
              </div>
              <div class="chart-container">
                <h5>Attendance Trends (Last 7 days)</h5>
                <canvas id="attendance-chart"></canvas>
              </div>
            </div>
            <button class="btn quick-action-btn role-specific teacher-only">Mark Attendance</button>
          </section>
          <section id="discipline" class="module-section hidden">
            <h2>Discipline Records</h2>
            <p>Track and manage student discipline cases.</p>
            <ul class="events-list">
              <li>Fighting in class - Class 7A - Yesterday • High severity</li>
              <li>Unauthorized absence - Class 9B - 2 days ago • Medium severity</li>
            </ul>
            <button class="btn quick-action-btn role-specific admin-only teacher-only">Add Incident</button>
          </section>
          <section id="finance" class="finance-overview module-section hidden">
            <h2>Finance</h2>
            <div class="grid">
              <div class="card">
                <h5>Fee Collection Overview</h5>
                <p>Term 2 Fee Collection 75% Collected: $184,500 Outstanding: $61,800</p>
              </div>
              <div class="card">
                <h5>Recent Fee Payments</h5>
                <ul class="events-list">
                  <li>Jane Smith - Class 8B - Via M-Pesa • 2 hours ago - $450</li>
                  <li>Michael Omondi - Class 10A - Via Bank Transfer • Yesterday - $850</li>
                  <li>Sara Kimani - Class 6C - Via TigoPesa • Yesterday - $325</li>
                </ul>
              </div>
            </div>
            <button class="btn quick-action-btn role-specific accountant-only">Record Payment</button>
            <button class="btn quick-action-btn role-specific accountant-only">Create New Admission</button>
          </section>
          <section id="resources" class="resource-card module-section hidden">
            <h2>Digital Resources</h2>
            <p>Access and manage digital educational resources.</p>
            <div class="grid">
              <div class="card">
                <div class="card-body">
                  <h5>Introduction to Cell Biology</h5>
                  <p>PDF • 2.4 MB Updated 2 weeks ago</p>
                </div>
              </div>
              <div class="card">
                <div class="card-body">
                  <h5>Algebra Practice Problems</h5>
                  <p>PDF • 1.8 MB Updated 1 month ago</p>
                </div>
              </div>
              <div class="card">
                <div class="card-body">
                  <h5>Colonial History in Africa</h5>
                  <p>Video • 15:24 min Added 2 months ago</p>
                </div>
              </div>
            </div>
            <button class="btn quick-action-btn role-specific teacher-only admin-only">Upload Resource</button>
            <div class="card mt-3">
              <h5>Resource Metrics</h5>
              <p>Total Resources: 157 files Storage Used: 4.7 GB / 10 GB</p>
            </div>
          </section>
          <section id="communications" class="communication-stats module-section hidden">
            <h2>Communications</h2>
            <div class="grid">
              <div class="card">
                <h5>Recent Messages</h5>
                <ul class="events-list">
                  <li>Class 8A Parents - Reminder: Science project due this Friday - Today, 10:45 AM</li>
                  <li>All Teachers - Staff meeting rescheduled to 2:00 PM - Yesterday</li>
                </ul>
              </div>
              <div class="card">
                <h5>Communication Statistics</h5>
                <p>Messages sent (this month): 247 SMS credits remaining: 1,235 Email delivery rate: 98.2% Push notification opens: 76.5%</p>
              </div>
            </div>
            <button class="btn quick-action-btn">Send Announcement</button>
          </section>
          <section id="market" class="market-section hidden">
            <h2>SoMAp Market - Available Goods</h2>
            <p>Explore school essentials. Go to SoMAp Market for uniforms, supplies, and more.</p>
            <div class="grid">
              <div>
                <img src="https://images.pexels.com/photos/5212324/pexels-photo-5212324.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="School Uniform" class="market-img">
                <p>Grey Trousers, Skirts, White Shirts, Grey Sweaters</p>
              </div>
              <div>
                <img src="https://images.pexels.com/photos/1280942/pexels-photo-1280942.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Black Shoes" class="market-img">
                <p>Black Shoes</p>
              </div>
              <div>
                <img src="https://images.pexels.com/photos/247879/pexels-photo-247879.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Bags of Maize" class="market-img">
                <p>Bags of Maize, Beans, Cereals</p>
              </div>
              <div>
                <img src="https://images.pexels.com/photos/163064/pexels-photo-163064.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="Stationaries" class="market-img">
                <p>Stationaries</p>
              </div>
            </div>
            <div class="card mt-3">
              <h5>Marketplace Overview</h5>
              <p>Products: 42 Monthly Sales: $4,523 Orders: 127 Categories: 8</p>
            </div>
            <button class="btn quick-action-btn">View All Products</button>
          </section>
          <section id="ai-insights" class="ai-insights module-section hidden">
            <h2>AI-Powered Insights</h2>
            <div class="grid">
              <div class="card">
                <h5>Students at Risk</h5>
                <p>8 students have shown declining performance.</p>
              </div>
              <div class="card">
                <h5>Financial Forecasts</h5>
                <p>Term 3 Fee Collection Forecast: $210,500 (82%)</p>
              </div>
              <div class="card">
                <h5>AI Assistant</h5>
                <input type="text" class="form-control w-full" placeholder="Ask about school data...">
                <button class="btn quick-action-btn mt-2">Ask AI</button>
              </div>
            </div>
          </section>
          <section id="volunteers" class="volunteer-section module-section hidden">
            <h2>Volunteers & Exchanges</h2>
            <div class="grid">
              <div class="card">
                <h5>Current Volunteers</h5>
                <ul class="events-list">
                  <li>James Smith - Reading Assistant • 3 months</li>
                  <li>Maria Lopez - Math Tutor • 2 months</li>
                </ul>
              </div>
              <div class="card">
                <h5>Volunteer Hours</h5>
                <p>Hours this month: 247 Active volunteers: 12</p>
              </div>
            </div>
            <button class="btn quick-action-btn role-specific admin-only">Manage Volunteers</button>
          </section>
          <section id="events" class="module-section hidden">
            <h2>Events Management</h2>
            <div class="calendar">
              <h5>June 2025 Calendar</h5>
              <p>Sun Mon Tue Wed Thu Fri Sat ... (Full calendar here)</p>
            </div>
            <div class="card mt-3">
              <h5>Annual Sports Day</h5>
              <p>June 15, 2025 - 9:00 AM - 4:00 PM • School Grounds</p>
              <p>RSVPs: 425 Volunteers: 27</p>
            </div>
            <button class="btn quick-action-btn role-specific admin-only">Create Event</button>
          </section>
          <section id="admin-tools" class="module-section role-specific admin-only hidden">
            <h2>Admin Tools</h2>
            <p>Manage schools, users, etc.</p>
            <div class="card">
              <h5>Add New School</h5>
              <div class="space-y-3">
                <input type="text" class="form-control w-full mb-2" id="school-name" placeholder="School Name">
                <button id="add-school-submit" class="btn quick-action-btn">Add School</button>
              </div>
              <ul id="school-list">
                <li>Socrates School</li>
                <li>Mnyore Academy</li>
              </ul>
            </div>
          </section>
          <section id="class-tools" class="module-section role-specific teacher-only hidden">
            <h2>Class Tools</h2>
            <p>Manage your class: Attendance, Students, etc.</p>
            <select id="class-stream" class="form-select mb-3 w-full">
              <option>Select Stream (e.g., A or B)</option>
            </select>
            <button class="btn quick-action-btn">View Student List</button>
          </section>
          <section id="finance-tools" class="module-section role-specific accountant-only hidden">
            <h2>Finance Tools</h2>
            <p>Manage admissions, fees.</p>
            <button class="btn quick-action-btn">Create New Admission</button>
            <button class="btn quick-action-btn">Check Fees</button>
          </section>
          <section id="child-info" class="module-section role-specific parent-only hidden">
            <h2>Your Child's Info</h2>
            <p>Details, attendance, fees, etc. fetched from database.</p>
            <div id="child-details"></div>
          </section>
          <footer class="footer">
            <p>&copy; 2025 SoMAp - Built for excellence in education. Integrated with Firebase and inspired by modern designs.</p>
          </footer>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Firebase Config (Placeholder - replace with actual values)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "somaptestt.firebaseapp.com",
      databaseURL: "https://somaptestt-default-rtdb.firebaseio.com",
      projectId: "somaptestt",
      storageBucket: "somaptestt.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    const storage = firebase.storage();

    // Language Translations
    const translations = {
      en: {
        welcomeTitle: "Welcome to SoMAp",
        welcomeText: "Transform your school management with our comprehensive Educational SuperApp. Streamline operations, boost academic performance, connect with parents, and manage finances effortlessly. Inspired by leading systems like ShuleSoft, we're tailored for excellence in education.",
        getStarted: "Get Started",
        dashboard: "Dashboard",
        academic: "Academic",
        attendance: "Attendance",
        discipline: "Discipline",
        finance: "Finance",
        resources: "Digital Library",
        communications: "Communications",
        market: "Marketplace",
        sponsorship: "Sponsorship",
        aiInsights: "AI Insights",
        volunteers: "Volunteers",
        events: "Events",
        adminTools: "Admin Tools",
        classTools: "Class Tools",
        financeTools: "Finance Tools",
        childInfo: "Child Info",
        logout: "Logout"
      },
      sw: {
        welcomeTitle: "Karibu kwa SoMAp",
        welcomeText: "Badilisha usimamizi wa shule yako na SuperApp yetu ya Elimu ya kina. Rahisisha shughuli, ongeza utendaji wa kitaaluma, wasiliana na wazazi, na simamia fedha kwa urahisi. Imechochewa na mifumo inayoongoza kama ShuleSoft, tumeundwa kwa ubora katika elimu.",
        getStarted: "Anza",
        dashboard: "Dashibodi",
        academic: "Elimu",
        attendance: "Mahudhurio",
        discipline: "Nidhamu",
        finance: "Fedha",
        resources: "Maktaba ya Dijitali",
        communications: "Mawasiliano",
        market: "Soko",
        sponsorship: "Ufadhili",
        aiInsights: "Maarifa ya AI",
        volunteers: "Wajitolea",
        events: "Matukio",
        adminTools: "Zana za Admin",
        classTools: "Zana za Darasa",
        financeTools: "Zana za Fedha",
        childInfo: "Taarifa za Mtoto",
        logout: "Toka"
      }
    };

    // Language Select
    document.getElementById('language-select').addEventListener('change', (e) => {
      const lang = e.target.value;
      document.getElementById('welcome-title').textContent = translations[lang].welcomeTitle;
      document.getElementById('welcome-text').textContent = translations[lang].welcomeText;
      document.getElementById('get-started').textContent = translations[lang].getStarted;
      document.getElementById('sidebar-dashboard').textContent = translations[lang].dashboard;
      document.getElementById('sidebar-dashboard-expanded').textContent = translations[lang].dashboard;
      document.getElementById('sidebar-academic').textContent = translations[lang].academic;
      document.getElementById('sidebar-academic-expanded').textContent = translations[lang].academic;
      document.getElementById('sidebar-finance').textContent = translations[lang].finance;
      document.getElementById('sidebar-finance-expanded').textContent = translations[lang].finance;
      document.getElementById('sidebar-resources').textContent = translations[lang].resources;
      document.getElementById('sidebar-resources-expanded').textContent = translations[lang].resources;
      document.getElementById('sidebar-communications').textContent = translations[lang].communications;
      document.getElementById('sidebar-communications-expanded').textContent = translations[lang].communications;
      document.getElementById('sidebar-market').textContent = translations[lang].market;
      document.getElementById('sidebar-market-expanded').textContent = translations[lang].market;
      document.getElementById('sidebar-sponsorship').textContent = translations[lang].sponsorship;
      document.getElementById('sidebar-sponsorship-expanded').textContent = translations[lang].sponsorship;
      document.getElementById('sidebar-ai-insights').textContent = translations[lang].aiInsights;
      document.getElementById('sidebar-ai-insights-expanded').textContent = translations[lang].aiInsights;
      document.getElementById('sidebar-volunteers').textContent = translations[lang].volunteers;
      document.getElementById('sidebar-volunteers-expanded').textContent = translations[lang].volunteers;
      document.getElementById('sidebar-events').textContent = translations[lang].events;
      document.getElementById('sidebar-events-expanded').textContent = translations[lang].events;
      document.getElementById('sidebar-admin-tools').textContent = translations[lang].adminTools;
      document.getElementById('sidebar-admin-tools-expanded').textContent = translations[lang].adminTools;
      document.getElementById('sidebar-class-tools').textContent = translations[lang].classTools;
      document.getElementById('sidebar-class-tools-expanded').textContent = translations[lang].classTools;
      document.getElementById('sidebar-finance-tools').textContent = translations[lang].financeTools;
      document.getElementById('sidebar-finance-tools-expanded').textContent = translations[lang].financeTools;
      document.getElementById('sidebar-child-info').textContent = translations[lang].childInfo;
      document.getElementById('sidebar-child-info-expanded').textContent = translations[lang].childInfo;
      document.getElementById('sidebar-logout').textContent = translations[lang].logout;
      document.getElementById('sidebar-logout-expanded').textContent = translations[lang].logout;
    });

    // Sidebar Toggle
    document.getElementById('toggle-sidebar').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('sidebar-expanded');
      document.querySelector('.main-content').classList.toggle('sidebar-expanded');
      document.querySelectorAll('.sidebar-collapsed').forEach(el => el.classList.toggle('hidden'));
      document.querySelectorAll('.sidebar-expanded').forEach(el => el.classList.toggle('hidden'));
    });

    // Get Started
    document.getElementById('get-started').addEventListener('click', () => {
      document.getElementById('welcome-page').classList.add('hidden');
      document.getElementById('login-page').classList.remove('hidden');
    });

    // Role Change to Show Phone for Parents
    document.getElementById('role').addEventListener('change', (e) => {
      document.getElementById('parent-phone').classList.toggle('hidden', e.target.value !== 'parent');
    });

    // Login Form
    document.getElementById('login-submit').addEventListener('click', (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      auth.signInWithEmailAndPassword(email, password)
        .then(handleAuthSuccess)
        .catch(err => Swal.fire('Error', 'Login failed: ' + err.message, 'error'));
    });

    // Google SignIn
    document.getElementById('google-signin').addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(handleAuthSuccess)
        .catch(err => Swal.fire('Error', 'Google Sign-In failed: ' + err.message, 'error'));
    });

    // GitHub SignIn
    document.getElementById('github-signin').addEventListener('click', () => {
      const provider = new firebase.auth.GithubAuthProvider();
      auth.signInWithPopup(provider)
        .then(handleAuthSuccess)
        .catch(err => Swal.fire('Error', 'GitHub Sign-In failed: ' + err.message, 'error'));
    });

    // Handle Successful Auth
    function handleAuthSuccess() {
      document.getElementById('login-page').classList.add('hidden');
      document.getElementById('main-dashboard').classList.remove('hidden');
      document.getElementById('sidebar').style.display = 'block';
      const user = auth.currentUser;
      const role = document.getElementById('role').value;
      let className = getClassFromEmail(user.email);
      document.querySelectorAll(`.${role}-only`).forEach(el => el.style.display = 'block');
      loadDashboardData(role, className);
      if (role === 'parent') {
        const phone = document.getElementById('phone').value;
        loadParentData(phone);
      }
    }

    // Get Class from Email
    function getClassFromEmail(email) {
      if (!email) return '';
      email = email.toLowerCase();
      if (email.includes('babyclass')) return 'Baby Class';
      if (email.includes('middleclass')) return 'Middle Class';
      if (email.includes('preunit')) return 'Pre-Unit';
      if (email.includes('class1ab')) return 'Class 1 AB';
      if (email.includes('class2ab')) return 'Class 2 AB';
      if (email.includes('class32023')) return 'Class 3';
      if (email.includes('class42023')) return 'Class 4';
      if (email.includes('class52023')) return 'Class 5';
      if (email.includes('class62023')) return 'Class 6';
      if (email.includes('class72023')) return 'Class 7';
      return '';
    }

    // Load Dashboard Data from Firebase
    function loadDashboardData(role, className) {
      db.ref('students').once('value').then(snapshot => {
        const students = snapshot.val();
        let filteredStudents = Object.values(students || {});
        if (role === 'teacher' && className) {
          filteredStudents = filteredStudents.filter(s => s.classLevel === className);
        }
        document.getElementById('total-students').innerHTML = `${filteredStudents.length} <small>5.2% Since last month</small>`;
        let totalBalance = filteredStudents.reduce((sum, s) => sum + (s.balance || 0), 0);
        document.getElementById('fee-collection').innerHTML = `$${totalBalance.toLocaleString()} <small>8.4% Since last month</small>`;
      });
    }

    // Load Parent Data
    function loadParentData(phone) {
      db.ref('students').orderByChild('parentPhone').equalTo(phone).once('value').then(snapshot => {
        const child = snapshot.val();
        document.getElementById('child-details').innerHTML = child ? Object.values(child).map(c => `<p>${c.name} - Class: ${c.classLevel}</p>`).join('') : '<p>No child found.</p>';
      });
    }

    // Add School
    document.getElementById('add-school-submit')?.addEventListener('click', (e) => {
      e.preventDefault();
      const schoolName = document.getElementById('school-name').value;
      db.ref('schools').push({ name: schoolName });
      Swal.fire('Success', 'School added!', 'success');
      document.getElementById('school-list').innerHTML += `<li>${schoolName}</li>`;
    });

    // Logout
    document.getElementById('logout').addEventListener('click', () => {
      auth.signOut().then(() => location.reload());
    });

    // Charts
    const attendanceCtx = document.getElementById('attendance-chart')?.getContext('2d');
    if (attendanceCtx) {
      new Chart(attendanceCtx, {
        type: 'bar',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          datasets: [{ label: 'Attendance', data: [90, 92, 94, 93, 95, 80, 85], backgroundColor: '#20c997' }]
        }
      });
    }

    // Module Panel Handling
    document.querySelectorAll('.sidebar-icon[data-module]').forEach(button => {
      button.addEventListener('click', () => {
        const module = button.dataset.module;
        document.querySelectorAll('.sidebar-icon').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        document.querySelectorAll('.module-section').forEach(section => section.classList.add('hidden'));
        document.getElementById(module)?.classList.remove('hidden');
        document.getElementById('module-panel').classList.add('active');
        document.getElementById('module-title').textContent = button.querySelector('.sidebar-tooltip').textContent;
        const template = document.getElementById(`${module}-template`)?.innerHTML || '';
        document.getElementById('module-content').innerHTML = template;
      });
    });

    // Close Module Panel
    document.getElementById('close-module').addEventListener('click', () => {
      document.getElementById('module-panel').classList.remove('active');
    });

    // Library Tab Switching
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('library-tab')) {
        document.querySelectorAll('.library-tab').forEach(tab => tab.classList.remove('active', 'border-indigo-500', 'text-indigo-600'));
        document.querySelectorAll('.library-tab-content').forEach(content => content.classList.remove('active'));
        e.target.classList.add('active', 'border-indigo-500', 'text-indigo-600');
        document.querySelector(`.library-tab-content[data-tab="${e.target.dataset.tab}"]`).classList.add('active');
      }
    });

    // Resource Upload Simulation
    document.querySelector('#module-content')?.addEventListener('click', (e) => {
      if (e.target.closest('button')?.textContent === 'Upload Resource') {
        Swal.fire('Success', 'Resource uploaded successfully!', 'success');
      }
    });

    // Initial Loads
    auth.onAuthStateChanged(user => {
      if (user) handleAuthSuccess();
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
          
          <div class="library-tab-content" data-tab="categories">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Resource Categories</h3>
                <p class="text-sm text-gray-500 mb-3">Organize and manage library categories</p>
                
                <div class="space-y-2">
                  <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                      <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-flask text-indigo-600"></i>
                      </div>
                      <span class="font-medium">Science</span>
                    </div>
                    <span class="text-sm text-gray-500">42 resources</span>
                  </div>
                  
                  <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                      <div class="h-8 w-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-calculator text-green-600"></i>
                      </div>
                      <span class="font-medium">Mathematics</span>
                    </div>
                    <span class="text-sm text-gray-500">37 resources</span>
                  </div>
                  
                  <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                      <div class="h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-language text-blue-600"></i>
                      </div>
                      <span class="font-medium">Languages</span>
                    </div>
                    <span class="text-sm text-gray-500">29 resources</span>
                  </div>
                  
                  <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                      <div class="h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-landmark text-yellow-600"></i>
                      </div>
                      <span class="font-medium">History</span>
                    </div>
                    <span class="text-sm text-gray-500">24 resources</span>
                  </div>
                  
                  <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                      <div class="h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                        <i class="fas fa-globe-africa text-purple-600"></i>
                      </div>
                      <span class="font-medium">Geography</span>
                    </div>
                    <span class="text-sm text-gray-500">18 resources</span>
                  </div>
                </div>
                
                <div class="mt-4">
                  <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Add New Category</button>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Resource Metrics</h3>
                <div class="mt-3">
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">Most Downloaded</span>
                    <span class="text-sm font-medium">Algebra Practice Problems</span>
                  </div>
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">Most Recent</span>
                    <span class="text-sm font-medium">Introduction to Cell Biology</span>
                  </div>
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">Total Resources</span>
                    <span class="text-sm font-medium">157 files</span>
                  </div>
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">Storage Used</span>
                    <span class="text-sm font-medium">4.7 GB / 10 GB</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Communication Module Template -->
      /* Communication Module Styles */
    .comm-tab {
      border: none;
      background: none;
      cursor: pointer;
    }

    .comm-tab-content {
      display: none;
    }

    .comm-tab-content.active {
      display: block;
    }

    /* Live Chat Styles */
    .msg {
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      max-width: 70%;
    }

    .msg.me {
      background-color: #e3f2fd;
      margin-left: auto;
    }

    .meta {
      font-size: 0.75rem;
      color: #6b7280;
    }

    .tiny {
      font-size: 0.65rem;
    }
  </style>
</head>
<body class="bg-gray-50">
  <div class="flex h-screen overflow-hidden">
    <!-- Sidebar -->
    <div id="sidebar" class="flex flex-col h-full bg-white shadow-md p-1 relative z-10" style="width: 64px; transition: width 0.3s ease;">
      <!-- Logo -->
      <div class="flex items-center justify-center h-14 mb-2">
        <img src="images/somap-logo.png.jpg" alt="SoMAp Logo" class="sidebar-logo">
      </div>
      <!-- Menu Items -->
      <div class="flex-1 overflow-y-auto">
        <div class="flex flex-col space-y-1">
          <button class="sidebar-icon flex items-center justify-center w-10 h-10 rounded-lg text-gray-500 mx-auto active" data-module="dashboard">
            <i class="fas fa-th-large text-xl"></i>
            <span class="sidebar-tooltip">Dashboard</span>
            <span class="sidebar-expanded hidden ml-3 text-sm font-medium">Dashboard</span>
          </button>
          <!-- Add other menu items as needed -->
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col overflow-hidden">
      <main class="flex-1 overflow-y-auto p-4">
        <div id="communication-template">
          <div class="mb-4">
            <div class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm mb-4">
              Send messages, alerts, and notifications to students, parents, and staff.
            </div>
            <!-- Tabs -->
            <div class="flex border-b mb-4">
              <button class="comm-tab px-4 py-2 font-medium border-b-2 border-indigo-500 text-indigo-600 active" data-tab="messages">Messages</button>
              <button class="comm-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="alerts">Alerts</button>
              <button class="comm-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="templates">Templates</button>
              <button class="comm-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="livechat">Live Chat</button>
            </div>
            <!-- Tab content -->
            <div class="comm-tab-content active" data-tab="messages">
              <div class="mb-3">
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">New Message</button>
              </div>
              <div class="space-y-3">
                <div class="bg-white rounded-lg shadow p-4">
                  <h3 class="font-medium text-gray-800 mb-2">Recent Messages</h3>
                  <div class="space-y-3">
                    <div class="flex justify-between p-2 border-b">
                      <div>
                        <div class="flex items-center">
                          <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded mr-2">Sent</span>
                          <h4 class="font-medium text-sm">Class 8A Parents</h4>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">Reminder: Science project due this Friday</p>
                      </div>
                      <div class="text-right">
                        <span class="text-xs text-gray-500">Today, 10:45 AM</span>
                        <div class="mt-1 text-xs">
                          <span class="text-green-600">42/45 delivered</span>
                        </div>
                      </div>
                    </div>
                    <div class="flex justify-between p-2 border-b">
                      <div>
                        <div class="flex items-center">
                          <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded mr-2">Sent</span>
                          <h4 class="font-medium text-sm">All Teachers</h4>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">Staff meeting rescheduled to 2:00 PM</p>
                      </div>
                      <div class="text-right">
                        <span class="text-xs text-gray-500">Yesterday</span>
                        <div class="mt-1 text-xs">
                          <span class="text-green-600">22/24 delivered</span>
                        </div>
                      </div>
                    </div>
                    <div class="flex justify-between p-2 border-b">
                      <div>
                        <div class="flex items-center">
                          <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded mr-2">Sent</span>
                          <h4 class="font-medium text-sm">Sarah Williams</h4>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">Parent consultation follow-up</p>
                      </div>
                      <div class="text-right">
                        <span class="text-xs text-gray-500">May 25</span>
                        <div class="mt-1 text-xs">
                          <span class="text-green-600">Read</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="bg-white rounded-lg shadow p-4">
                  <h3 class="font-medium text-gray-800 mb-3">Quick Message</h3>
                  <form class="space-y-3">
                    <div>
                      <label class="block text-sm text-gray-600 mb-1">Recipients</label>
                      <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <option>Select recipient(s)</option>
                        <option>All Parents</option>
                        <option>All Teachers</option>
                        <option>Class 7A</option>
                        <option>Class 8B</option>
                        <option>Class 9C</option>
                        <option>Individual Student/Parent</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm text-gray-600 mb-1">Message</label>
                      <textarea rows="3" placeholder="Type your message here..." class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    </div>
                    <div>
                      <label class="block text-sm text-gray-600 mb-1">Send via</label>
                      <div class="flex space-x-3">
                        <label class="inline-flex items-center">
                          <input type="checkbox" class="rounded text-indigo-600" checked>
                          <span class="ml-1 text-sm">SMS</span>
                        </label>
                        <label class="inline-flex items-center">
                          <input type="checkbox" class="rounded text-indigo-600" checked>
                          <span class="ml-1 text-sm">App Notification</span>
                        </label>
                        <label class="inline-flex items-center">
                          <input type="checkbox" class="rounded text-indigo-600">
                          <span class="ml-1 text-sm">Email</span>
                        </label>
                      </div>
                    </div>
                    <button type="button" class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Send Message</button>
                  </form>
                </div>
              </div>
            </div>
            <div class="comm-tab-content" data-tab="alerts">
              <div class="space-y-3">
                <div class="bg-white rounded-lg shadow p-4">
                  <h3 class="font-medium text-gray-800">Emergency Alerts</h3>
                  <p class="text-sm text-gray-500 mb-3">Send important alerts to all parents and staff</p>
                  <div class="grid grid-cols-2 gap-2">
                    <button class="p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition flex flex-col items-center text-sm">
                      <i class="fas fa-exclamation-circle mb-1"></i>
                      Emergency Closure
                    </button>
                    <button class="p-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition flex flex-col items-center text-sm">
                      <i class="fas fa-clock mb-1"></i>
                      Early Dismissal
                    </button>
                    <button class="p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition flex flex-col items-center text-sm">
                      <i class="fas fa-bus mb-1"></i>
                      Transport Delay
                    </button>
                    <button class="p-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition flex flex-col items-center text-sm">
                      <i class="fas fa-calendar-alt mb-1"></i>
                      Event Update
                    </button>
                  </div>
                </div>

  <script>
    // Initialize Firebase
    document.addEventListener('DOMContentLoaded', () => {
      // Tab Switching
      const tabs = document.querySelectorAll('.comm-tab');
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('border-b-2', 'border-indigo-500', 'text-indigo-600'));
          tab.classList.add('border-b-2', 'border-indigo-500', 'text-indigo-600');
          document.querySelectorAll('.comm-tab-content').forEach(content => content.classList.remove('active'));
          document.querySelector(`.comm-tab-content[data-tab="${tab.dataset.tab}"]`).classList.add('active');
        });
      });

      // Chat Functionality
      function addMessageToUI(msgObj, key) {
        const el = document.createElement('div');
        const name = msgObj.name || 'Anon';
        const text = msgObj.text || '';
        const ts = msgObj.timestamp ? new Date(msgObj.timestamp) : new Date();
        const time = ts.toLocaleString();
        const me = (myName.value || '').trim() && (myName.value || '').trim().toLowerCase() === name.toLowerCase();
        el.className = 'msg' + (me ? ' me' : '');
        el.innerHTML = `<div class="meta"><strong>${escapeHtml(name)}</strong> • <span class="tiny">${escapeHtml(time)}</span></div><div>${escapeHtml(text)}</div>`;
        chatEl.appendChild(el);
        chatEl.scrollTop = chatEl.scrollHeight;
      }

      sendBtn.addEventListener('click', sendMessage);
      msgInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          sendMessage();
        }
      });

      function sendMessage() {
        const name = (myName.value || '').trim();
        const text = (msgInput.value || '').trim();
        if (!name) { alert('Enter your name'); return; }
        if (!text) return;
        sendBtn.disabled = true;
        const payload = { name, text, timestamp: Date.now() };
        db.ref('messages').push(payload)
          .then(() => { msgInput.value = ''; })
          .catch(err => alert('Send failed: ' + err.message))
          .finally(() => sendBtn.disabled = false);
      }

      db.ref('messages').limitToLast(200).on('child_added', snap => {
        addMessageToUI(snap.val(), snap.key);
      });

  </script>
              
              <a href="javascript:void(0)" class="block text-center text-indigo-600 hover:underline text-sm pt-2">View all products</a>
            </div>
          </div>
          
          <div class="market-tab-content" data-tab="orders">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Recent Orders</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="flex justify-between p-3 border rounded-lg">
                    <div>
                      <div class="flex items-center">
                        <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded mr-2">Completed</span>
                        <h4 class="font-medium text-sm">Order #23587</h4>
                      </div>
                      <p class="text-sm text-gray-500 mt-1">3 items • Paid via M-Pesa</p>
                    </div>
                    <div class="text-right">
                      <span class="font-medium text-indigo-600">$52.50</span>
                      <p class="text-xs text-gray-500 mt-1">May 28, 2025</p>
                    </div>
                  </div>
                  
                  <div class="flex justify-between p-3 border rounded-lg">
                    <div>
                      <div class="flex items-center">
                        <span class="bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded mr-2">Processing</span>
                        <h4 class="font-medium text-sm">Order #23586</h4>
                      </div>
                      <p class="text-sm text-gray-500 mt-1">2 items • Paid via Bank Transfer</p>
                    </div>
                    <div class="text-right">
                      <span class="font-medium text-indigo-600">$67.25</span>
                      <p class="text-xs text-gray-500 mt-1">May 27, 2025</p>
                    </div>
                  </div>
                  
                  <div class="flex justify-between p-3 border rounded-lg">
                    <div>
                      <div class="flex items-center">
                        <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded mr-2">Completed</span>
                        <h4 class="font-medium text-sm">Order #23580</h4>
                      </div>
                      <p class="text-sm text-gray-500 mt-1">1 item • Paid via Airtel Money</p>
                    </div>
                    <div class="text-right">
                      <span class="font-medium text-indigo-600">$45.00</span>
                      <p class="text-xs text-gray-500 mt-1">May 25, 2025</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Order Search</h3>
                
                <div class="mt-3">
                  <div class="relative mb-3">
                    <input type="text" placeholder="Search by order number, student name..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-2 mb-3">
                    <div>
                      <label class="block text-xs text-gray-600 mb-1">From</label>
                      <input type="date" class="w-full p-2 border rounded-lg text-sm">
                    </div>
                    <div>
                      <label class="block text-xs text-gray-600 mb-1">To</label>
                      <input type="date" class="w-full p-2 border rounded-lg text-sm">
                    </div>
                  </div>
                  
                  <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Search Orders</button>
                </div>
              </div>
            </div>
          </div>          
          
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Payment Settings</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="flex items-center justify-between">
                    <div>
                      <h4 class="text-sm font-medium">M-Pesa Integration</h4>
                      <p class="text-xs text-gray-500">Connected</p>
                    </div>
                    <div class="relative inline-block w-10 align-middle">
                      <input type="checkbox" id="mpesa-toggle" class="opacity-0 absolute h-0 w-0" checked />
                      <label for="mpesa-toggle" class="block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer">
                        <span class="block h-6 w-6 rounded-full bg-white transform transition-transform" style="transform: translateX(16px);"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="flex items-center justify-between">
                    <div>
                      <h4 class="text-sm font-medium">Airtel Money</h4>
                      <p class="text-xs text-gray-500">Connected</p>
                    </div>
                    <div class="relative inline-block w-10 align-middle">
                      <input type="checkbox" id="airtel-toggle" class="opacity-0 absolute h-0 w-0" checked />
                      <label for="airtel-toggle" class="block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer">
                        <span class="block h-6 w-6 rounded-full bg-white transform transition-transform" style="transform: translateX(16px);"></span>
                      </label>
                    </div>
                  </div>
                  
                  <div class="flex items-center justify-between">
                    <div>
                      <h4 class="text-sm font-medium">Bank Transfer</h4>
                      <p class="text-xs text-gray-500">Connected</p>
                    </div>
                    <div class="relative inline-block w-10 align-middle">
                      <input type="checkbox" id="bank-toggle" class="opacity-0 absolute h-0 w-0" checked />
                      <label for="bank-toggle" class="block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer">
                        <span class="block h-6 w-6 rounded-full bg-white transform transition-transform" style="transform: translateX(16px);"></span>
                      </label>
                    </div>
                  </div>
                </div>
                
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-3">Configure Payment Methods</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sponsorship Module Template -->
      <div id="sponsorship-template">
        <div class="mb-4">
          <div class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm mb-4">
            Manage fundraising campaigns and sponsor relationships for school projects and student support.
          </div>
          
          <!-- Tabs -->
          <div class="flex border-b mb-4">
            <button class="sponsor-tab px-4 py-2 font-medium border-b-2 border-indigo-500 text-indigo-600 active" data-tab="sponsors">Sponsors</button>
            <button class="sponsor-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="campaigns">Campaigns</button>
            <button class="sponsor-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="impact">Impact</button>
          </div>
          
          <!-- Tab content -->
          <div class="sponsor-tab-content active" data-tab="sponsors">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Active Sponsors</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="flex items-center p-2 border-b">
                    <div class="h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-indigo-600">GF</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="text-sm font-medium">Global Foundation</h4>
                      <p class="text-xs text-gray-500">Education Support Program</p>
                    </div>
                    <span class="font-medium text-green-600">$15,000</span>
                  </div>
                  
                  <div class="flex items-center p-2 border-b">
                    <div class="h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-blue-600">TC</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="text-sm font-medium">Tech Company Ltd</h4>
                      <p class="text-xs text-gray-500">Computer Lab Initiative</p>
                    </div>
                    <span class="font-medium text-green-600">$8,750</span>
                  </div>
                  
                  <div class="flex items-center p-2 border-b">
                    <div class="h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-purple-600">LC</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="text-sm font-medium">Local Community Trust</h4>
                      <p class="text-xs text-gray-500">Scholarship Program</p>
                    </div>
                    <span class="font-medium text-green-600">$5,200</span>
                  </div>
                </div>
                
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-3">Add New Sponsor</button>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Sponsor Activities</h3>
                
                <div class="mt-3 space-y-2">
                  <div class="flex justify-between items-center text-sm p-2 bg-gray-50 rounded-lg">
                    <div>
                      <p class="font-medium">Global Foundation</p>
                      <p class="text-gray-500 text-xs">Added 2 new sponsored students</p>
                    </div>
                    <span class="text-xs text-gray-500">Yesterday</span>
                  </div>
                  
                  <div class="flex justify-between items-center text-sm p-2 bg-gray-50 rounded-lg">
                    <div>
                      <p class="font-medium">Tech Company Ltd</p>
                      <p class="text-gray-500 text-xs">Increased donation by $2,500</p>
                    </div>
                    <span class="text-xs text-gray-500">3 days ago</span>
                  </div>
                  
                  <div class="flex justify-between items-center text-sm p-2 bg-gray-50 rounded-lg">
                    <div>
                      <p class="font-medium">Local Community Trust</p>
                      <p class="text-gray-500 text-xs">Requested progress report</p>
                    </div>
                    <span class="text-xs text-gray-500">May 21, 2025</span>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Sponsor Communications</h3>
                
                <div class="mt-3 space-y-2">
                  <button class="w-full py-2 text-left px-3 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition flex items-center">
                    <i class="fas fa-envelope mr-2"></i> Send Update to All Sponsors
                  </button>
                  
                  <button class="w-full py-2 text-left px-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition flex items-center">
                    <i class="fas fa-file-alt mr-2"></i> Generate Sponsorship Reports
                  </button>
                  
                  <button class="w-full py-2 text-left px-3 bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100 transition flex items-center">
                    <i class="fas fa-calendar-alt mr-2"></i> Schedule Virtual Meeting
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="sponsor-tab-content" data-tab="campaigns">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Active Campaigns</h3>
                
                <div class="mt-3 space-y-4">
                  <div>
                    <div class="flex justify-between mb-1">
                      <h4 class="text-sm font-medium">Computer Lab Upgrade</h4>
                      <span class="text-xs font-medium text-green-600">73% Funded</span>
                    </div>
                    <div class="bg-gray-200 rounded-full h-2.5">
                      <div class="bg-green-500 h-2.5 rounded-full" style="width: 73%"></div>
                    </div>
                    <div class="flex justify-between text-xs mt-1">
                      <span>$14,600 raised</span>
                      <span>Goal: $20,000</span>
                    </div>
                  </div>
                  
                  <div>
                    <div class="flex justify-between mb-1">
                      <h4 class="text-sm font-medium">Library Expansion</h4>
                      <span class="text-xs font-medium text-green-600">42% Funded</span>
                    </div>
                    <div class="bg-gray-200 rounded-full h-2.5">
                      <div class="bg-green-500 h-2.5 rounded-full" style="width: 42%"></div>
                    </div>
                    <div class="flex justify-between text-xs mt-1">
                      <span>$6,300 raised</span>
                      <span>Goal: $15,000</span>
                    </div>
                  </div>
                  
                  <div>
                    <div class="flex justify-between mb-1">
                      <h4 class="text-sm font-medium">Scholarship Fund</h4>
                      <span class="text-xs font-medium text-green-600">89% Funded</span>
                    </div>
                    <div class="bg-gray-200 rounded-full h-2.5">
                      <div class="bg-green-500 h-2.5 rounded-full" style="width: 89%"></div>
                    </div>
                    <div class="flex justify-between text-xs mt-1">
                      <span>$8,900 raised</span>
                      <span>Goal: $10,000</span>
                    </div>
                  </div>
                </div>
                
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-4">Create New Campaign</button>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Campaign Management</h3>
                
                <div class="mt-3 space-y-2">
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-edit text-indigo-600"></i>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium">Update Campaign Details</h3>
                      <p class="text-xs text-gray-500">Edit goals, descriptions, and photos</p>
                    </div>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-share-alt text-green-600"></i>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium">Promote Campaigns</h3>
                      <p class="text-xs text-gray-500">Share on social media & emails</p>
                    </div>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-chart-line text-purple-600"></i>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium">View Analytics</h3>
                      <p class="text-xs text-gray-500">Campaign performance insights</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>
          
          <div class="sponsor-tab-content" data-tab="impact">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Sponsorship Impact</h3>
                
                <div class="grid grid-cols-2 gap-3 mt-3">
                  <div class="p-3 bg-indigo-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-indigo-700">48</h4>
                    <p class="text-xs text-gray-600">Sponsored Students</p>
                  </div>
                  
                  <div class="p-3 bg-green-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-green-700">$28,950</h4>
                    <p class="text-xs text-gray-600">Total Sponsorships</p>
                  </div>
                  
                  <div class="p-3 bg-yellow-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-yellow-700">12</h4>
                    <p class="text-xs text-gray-600">Active Projects</p>
                  </div>
                  
                  <div class="p-3 bg-purple-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-purple-700">87%</h4>
                    <p class="text-xs text-gray-600">Retention Rate</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Recent Impact Stories</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="p-3 border rounded-lg">
                    <h4 class="text-sm font-medium">Computer Lab Transformation</h4>
                    <p class="text-xs text-gray-500 mt-1">Our new computer lab now serves 450+ students weekly, increasing digital literacy scores by 32%.</p>
                    <div class="flex justify-end mt-2">
                      <button class="text-xs text-indigo-600 hover:underline">Share with sponsors</button>
                    </div>
                  </div>
                  
                  <div class="p-3 border rounded-lg">
                    <h4 class="text-sm font-medium">Scholarship Success Story</h4>
                    <p class="text-xs text-gray-500 mt-1">Maria has maintained a 3.8 GPA throughout the year thanks to the scholarship that covered her fees and materials.</p>
                    <div class="flex justify-end mt-2">
                      <button class="text-xs text-indigo-600 hover:underline">Share with sponsors</button>
                    </div>
                  </div>
                  
                  <div class="p-3 border rounded-lg">
                    <h4 class="text-sm font-medium">Library Reading Program</h4>
                    <p class="text-xs text-gray-500 mt-1">Over 200 students have participated in our new reading program, with average reading skills improving by 27%.</p>
                    <div class="flex justify-end mt-2">
                      <button class="text-xs text-indigo-600 hover:underline">Share with sponsors</button>
                    </div>
                  </div>
                </div>
                
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-3">Add New Impact Story</button>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Impact Reports</h3>
                
                <div class="mt-3 space-y-2">
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-file-pdf text-indigo-600"></i>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium">2025 Q1 Impact Report</h3>
                      <p class="text-xs text-gray-500">Jan-Mar 2025 • 8 pages</p>
                    </div>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-file-pdf text-indigo-600"></i>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium">2024 Annual Report</h3>
                      <p class="text-xs text-gray-500">Full Year 2024 • 24 pages</p>
                    </div>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-file-pdf text-indigo-600"></i>
                    </div>
                    <div>
                      <h3 class="text-sm font-medium">Computer Lab Project Report</h3>
                      <p class="text-xs text-gray-500">Mar 2025 • 12 pages</p>
                    </div>
                  </a>
                </div>
                
                <div class="mt-3 flex justify-between">
                  <button class="py-2 px-3 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition text-sm">Generate Report</button>
                  <button class="py-2 px-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm">Schedule Reports</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Assistant Module Template -->
      <div id="ai-template">
        <div class="mb-4">
          <div class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm mb-4">
            AI-powered insights and analytics to help identify struggling students and optimize school operations.
          </div>
          
          <!-- Tabs -->
          <div class="flex border-b mb-4">
            <button class="ai-tab px-4 py-2 font-medium border-b-2 border-indigo-500 text-indigo-600 active" data-tab="insights">Insights</button>
            <button class="ai-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="reports">Reports</button>
            <button class="ai-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="assistant">AI Assistant</button>
          </div>
          
          <!-- Tab content -->
          <div class="ai-tab-content active" data-tab="insights">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Student Performance Insights</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="p-3 border-l-4 border-yellow-500 bg-yellow-50 rounded-r-lg">
                    <div class="flex items-center">
                      <i class="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>
                      <h4 class="text-sm font-medium">Students at Risk</h4>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">8 students have shown declining performance in core subjects over the past month.</p>
                    <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline mt-1 block">View detailed report</a>
                  </div>
                  
                  <div class="p-3 border-l-4 border-green-500 bg-green-50 rounded-r-lg">
                    <div class="flex items-center">
                      <i class="fas fa-arrow-up text-green-500 mr-2"></i>
                      <h4 class="text-sm font-medium">Improved Performance</h4>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">12 students have shown significant improvement in Mathematics after the new teaching approach.</p>
                    <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline mt-1 block">View detailed report</a>
                  </div>
                  
                  <div class="p-3 border-l-4 border-indigo-500 bg-indigo-50 rounded-r-lg">
                    <div class="flex items-center">
                      <i class="fas fa-lightbulb text-indigo-500 mr-2"></i>
                      <h4 class="text-sm font-medium">Recommendation</h4>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Consider scheduling targeted help sessions for Grade 9 students before their upcoming Science exam.</p>
                    <div class="flex space-x-2 mt-2">
                      <button class="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded">Schedule</button>
                      <button class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">Dismiss</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Financial Forecasts</h3>
                
                <div class="mt-3">
                  <div class="bg-gray-50 p-3 rounded-lg mb-3">
                    <h4 class="text-sm font-medium mb-2">Term 3 Fee Collection Forecast</h4>
                    <div class="bg-gray-200 rounded-full h-2.5 mb-2">
                      <div class="bg-indigo-500 h-2.5 rounded-full" style="width: 82%"></div>
                    </div>
                    <div class="flex justify-between text-xs">
                      <span>Projected: $210,500 (82%)</span>
                      <span>Target: $257,000</span>
                    </div>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-2 text-center">
                    <div class="p-2 border rounded-lg">
                      <h5 class="text-xs text-gray-500">Expected Payments</h5>
                      <p class="font-medium">245 students</p>
                    </div>
                    
                    <div class="p-2 border rounded-lg">
                      <h5 class="text-xs text-gray-500">At Risk Payments</h5>
                      <p class="font-medium text-yellow-600">37 students</p>
                    </div>
                    
                    <div class="p-2 border rounded-lg">
                      <h5 class="text-xs text-gray-500">Avg. Payment Delay</h5>
                      <p class="font-medium">14.5 days</p>
                    </div>
                    
                    <div class="p-2 border rounded-lg">
                      <h5 class="text-xs text-gray-500">Collection Efficiency</h5>
                      <p class="font-medium text-green-600">+4.2%</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Academic Trends</h3>
                
                <div class="mt-3">
                  <div class="flex items-center justify-between mb-2">
                    <h4 class="text-sm font-medium">Subject Performance</h4>
                    <select class="text-xs border rounded py-1 px-2">
                      <option>All Grades</option>
                      <option>Grade 7</option>
                      <option>Grade 8</option>
                      <option>Grade 9</option>
                      <option>Grade 10</option>
                    </select>
                  </div>
                  
                  <div class="space-y-2">
                    <div>
                      <div class="flex justify-between text-xs mb-1">
                        <span>Mathematics</span>
                        <span>78% average</span>
                      </div>
                      <div class="bg-gray-200 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 78%"></div>
                      </div>
                    </div>
                    
                    <div>
                      <div class="flex justify-between text-xs mb-1">
                        <span>Science</span>
                        <span>71% average</span>
                      </div>
                      <div class="bg-gray-200 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 71%"></div>
                      </div>
                    </div>
                    
                    <div>
                      <div class="flex justify-between text-xs mb-1">
                        <span>Languages</span>
                        <span>83% average</span>
                      </div>
                      <div class="bg-gray-200 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 83%"></div>
                      </div>
                    </div>
                    
                    <div>
                      <div class="flex justify-between text-xs mb-1">
                        <span>Social Studies</span>
                        <span>65% average</span>
                      </div>
                      <div class="bg-gray-200 rounded-full h-2">
                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 65%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="ai-tab-content" data-tab="reports">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">AI-Generated Reports</h3>
                
                <div class="mt-3 space-y-2">
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-chart-line text-indigo-600"></i>
                    </div>
                    <div class="flex-1">
                      <h3 class="text-sm font-medium">Academic Performance Analysis</h3>
                      <p class="text-xs text-gray-500">Generated yesterday • 8 pages</p>
                    </div>
                    <i class="fas fa-download text-gray-400"></i>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-money-bill-wave text-green-600"></i>
                    </div>
                    <div class="flex-1">
                      <h3 class="text-sm font-medium">Financial Health Report</h3>
                      <p class="text-xs text-gray-500">Generated May 25 • 12 pages</p>
                    </div>
                    <i class="fas fa-download text-gray-400"></i>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-red-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-exclamation-triangle text-red-600"></i>
                    </div>
                    <div class="flex-1">
                      <h3 class="text-sm font-medium">At-Risk Students Report</h3>
                      <p class="text-xs text-gray-500">Generated May 22 • 5 pages</p>
                    </div>
                    <i class="fas fa-download text-gray-400"></i>
                  </a>
                  
                  <a href="javascript:void(0)" class="flex items-center p-2 rounded-lg hover:bg-gray-50 transition-colors">
                    <div class="h-8 w-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-clipboard-list text-purple-600"></i>
                    </div>
                    <div class="flex-1">
                      <h3 class="text-sm font-medium">Attendance Patterns Analysis</h3>
                      <p class="text-xs text-gray-500">Generated May 20 • 7 pages</p>
                    </div>
                    <i class="fas fa-download text-gray-400"></i>
                  </a>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Generate New Report</h3>
                
                <form class="mt-3 space-y-3">
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Report Type</label>
                    <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                      <option>Academic Performance</option>
                      <option>Financial Analysis</option>
                      <option>Attendance Patterns</option>
                      <option>Behavior Analysis</option>
                      <option>Teacher Performance</option>
                      <option>Resource Utilization</option>
                    </select>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="block text-sm text-gray-600 mb-1">Time Period</label>
                      <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <option>Last Month</option>
                        <option>Current Term</option>
                        <option>Last Term</option>
                        <option>Current Year</option>
                        <option>Custom Range</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm text-gray-600 mb-1">Grade/Class</label>
                      <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        <option>All Grades</option>
                        <option>Grade 7</option>
                        <option>Grade 8</option>
                        <option>Grade 9</option>
                        <option>Grade 10</option>
                        <option>Custom Selection</option>
                      </select>
                    </div>
                  </div>
                  
                  <div>
                    <label class="block text-sm text-gray-600 mb-1">Additional Options</label>
                    <div class="space-y-1">
                      <label class="flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600" checked>
                        <span class="ml-2 text-xs">Include visual charts and graphs</span>
                      </label>
                      <label class="flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600" checked>
                        <span class="ml-2 text-xs">Include AI recommendations</span>
                      </label>
                      <label class="flex items-center">
                        <input type="checkbox" class="rounded text-indigo-600">
                        <span class="ml-2 text-xs">Compare with previous period</span>
                      </label>
                    </div>
                  </div>
                  
                  <button type="button" class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Generate Report</button>
                </form>
              </div>
            </div>
          </div>
          
          <div class="ai-tab-content" data-tab="assistant">
            <div class="bg-white rounded-lg shadow overflow-hidden">
              <div class="p-4 border-b">
                <h3 class="font-medium text-gray-800">AI Assistant</h3>
                <p class="text-xs text-gray-500 mt-1">Ask questions about school data, get insights, or generate reports</p>
              </div>
              
              <div class="p-4 h-64 overflow-y-auto space-y-3 bg-gray-50">
                <div class="flex items-start">
                  <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-2">
                    <i class="fas fa-user text-indigo-600 text-sm"></i>
                  </div>
                  <div class="bg-white p-3 rounded-lg shadow-sm max-w-[80%]">
                    <p class="text-sm">Show me attendance trends for Grade 9 this term.</p>
                  </div>
                </div>
                
                <div class="flex items-start flex-row-reverse">
                  <div class="h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center ml-2">
                    <i class="fas fa-robot text-white text-sm"></i>
                  </div>
                  <div class="bg-indigo-100 p-3 rounded-lg shadow-sm max-w-[80%]">
                    <p class="text-sm">Grade 9 attendance has averaged 92.3% this term, which is 2.1% higher than last term. However, I've noticed a slight decline in the past two weeks, particularly on Mondays and Fridays.</p>
                    <div class="mt-2 p-2 bg-white rounded border">
                      <div class="h-20 bg-gray-100 rounded flex items-center justify-center">
                        <span class="text-xs text-gray-400">Attendance chart visualization</span>
                      </div>
                    </div>
                    <p class="text-sm mt-2">Would you like me to generate a detailed report or send automated absence follow-ups to parents of frequently absent students?</p>
                  </div>
                </div>
                
                <div class="flex items-start">
                  <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-2">
                    <i class="fas fa-user text-indigo-600 text-sm"></i>
                  </div>
                  <div class="bg-white p-3 rounded-lg shadow-sm max-w-[80%]">
                    <p class="text-sm">Generate a report and identify which students have missed more than 3 days.</p>
                  </div>
                </div>
                
                <div class="flex items-start flex-row-reverse">
                  <div class="h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center ml-2">
                    <i class="fas fa-robot text-white text-sm"></i>
                  </div>
                  <div class="bg-indigo-100 p-3 rounded-lg shadow-sm max-w-[80%]">
                    <p class="text-sm">I'm generating the report now. I've identified 7 students in Grade 9 who have missed more than 3 days this term. The report will include attendance patterns, impact on academic performance, and recommended interventions.</p>
                    <div class="flex space-x-2 mt-2">
                      <button class="text-xs bg-indigo-500 text-white px-3 py-1 rounded-full">View Report</button>
                      <button class="text-xs bg-white border px-3 py-1 rounded-full">Send Notifications</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="p-3 border-t">
                <div class="flex">
                  <input type="text" placeholder="Ask a question..." class="flex-1 border rounded-l-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                  <button class="bg-indigo-600 text-white px-4 rounded-r-lg hover:bg-indigo-700">
                    <i class="fas fa-paper-plane"></i>
                  </button>
                </div>
                <div class="flex flex-wrap gap-2 mt-2">
                  <button class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded-full">Attendance trends</button>
                  <button class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded-full">Fee payment forecast</button>
                  <button class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded-full">Identify struggling students</button>
                  <button class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded-full">Generate exam analysis</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Volunteer Module Template -->
      <div id="volunteer-template">
        <div class="mb-4">
          <div class="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm mb-4">
            Manage volunteers and international exchange programs to enhance school resources and cultural experiences.
          </div>
          
          <!-- Tabs -->
          <div class="flex border-b mb-4">
            <button class="volunteer-tab px-4 py-2 font-medium border-b-2 border-indigo-500 text-indigo-600 active" data-tab="volunteers">Volunteers</button>
            <button class="volunteer-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="programs">Programs</button>
            <button class="volunteer-tab px-4 py-2 font-medium text-gray-500 hover:text-gray-700" data-tab="contacts">Contacts</button>
          </div>
          
          <!-- Tab content -->
          <div class="volunteer-tab-content active" data-tab="volunteers">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <div class="flex justify-between items-center mb-3">
                  <h3 class="font-medium text-gray-800">Current Volunteers</h3>
                  <button class="p-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
                    <i class="fas fa-plus text-sm"></i>
                  </button>
                </div>
                
                <div class="space-y-3">
                  <div class="flex items-center p-2 border-b">
                    <div class="h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-indigo-600">JS</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="text-sm font-medium">James Smith</h4>
                      <p class="text-xs text-gray-500">Reading Assistant • 3 months</p>
                    </div>
                    <div>
                      <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Active</span>
                    </div>
                  </div>
                  
                  <div class="flex items-center p-2 border-b">
                    <div class="h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-blue-600">ML</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="text-sm font-medium">Maria Lopez</h4>
                      <p class="text-xs text-gray-500">Math Tutor • 2 months</p>
                    </div>
                    <div>
                      <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Active</span>
                    </div>
                  </div>
                  
                  <div class="flex items-center p-2 border-b">
                    <div class="h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-purple-600">DO</span>
                    </div>
                    <div class="flex-1">
                      <h4 class="text-sm font-medium">David Ochieng</h4>
                      <p class="text-xs text-gray-500">Sports Coach • 5 months</p>
                    </div>
                    <div>
                      <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Active</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800 mb-3">Volunteer Hours</h3>
                
                <div class="grid grid-cols-2 gap-3">
                  <div class="p-3 bg-indigo-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-indigo-700">247</h4>
                    <p class="text-xs text-gray-600">Hours this month</p>
                  </div>
                  
                  <div class="p-3 bg-green-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-green-700">12</h4>
                    <p class="text-xs text-gray-600">Active volunteers</p>
                  </div>
                  
                  <div class="p-3 bg-blue-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-blue-700">8</h4>
                    <p class="text-xs text-gray-600">Programs supported</p>
                  </div>
                  
                  <div class="p-3 bg-purple-50 rounded-lg text-center">
                    <h4 class="text-lg font-bold text-purple-700">3</h4>
                    <p class="text-xs text-gray-600">Countries represented</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800 mb-3">Upcoming Volunteers</h3>
                
                <div class="space-y-2">
                  <div class="flex items-center p-2 bg-gray-50 rounded-lg">
                    <div class="h-10 w-10 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-yellow-600">SW</span>
                    </div>
                    <div>
                      <h4 class="text-sm font-medium">Sarah Wilson</h4>
                      <p class="text-xs text-gray-500">English Teacher • Arriving Jun 15</p>
                    </div>
                  </div>
                  
                  <div class="flex items-center p-2 bg-gray-50 rounded-lg">
                    <div class="h-10 w-10 bg-green-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-green-600">JK</span>
                    </div>
                    <div>
                      <h4 class="text-sm font-medium">John Kim</h4>
                      <p class="text-xs text-gray-500">Music Instructor • Arriving Jul 2</p>
                    </div>
                  </div>
                </div>
                
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-3">Register New Volunteer</button>
              </div>
            </div>
          </div>
          
          <div class="volunteer-tab-content" data-tab="programs">
            <div class="space-y-3">
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">Active Programs</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="p-3 border rounded-lg">
                    <div class="flex justify-between">
                      <h4 class="text-sm font-medium">After-School Reading Club</h4>
                      <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Active</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">4 volunteers • Mondays & Wednesdays • 3:00 PM - 4:30 PM</p>
                    <div class="flex justify-between mt-2">
                      <span class="text-xs">45 students enrolled</span>
                      <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline">Manage</a>
                    </div>
                  </div>
                  
                  <div class="p-3 border rounded-lg">
                    <div class="flex justify-between">
                      <h4 class="text-sm font-medium">Math Tutoring Program</h4>
                      <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Active</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">3 volunteers • Tuesdays & Thursdays • 2:30 PM - 4:00 PM</p>
                    <div class="flex justify-between mt-2">
                      <span class="text-xs">32 students enrolled</span>
                      <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline">Manage</a>
                    </div>
                  </div>
                  
                  <div class="p-3 border rounded-lg">
                    <div class="flex justify-between">
                      <h4 class="text-sm font-medium">Sports Development Initiative</h4>
                      <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Active</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">5 volunteers • Friday & Saturday • Various times</p>
                    <div class="flex justify-between mt-2">
                      <span class="text-xs">87 students enrolled</span>
                      <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline">Manage</a>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="bg-white rounded-lg shadow p-4">
                <h3 class="font-medium text-gray-800">International Exchange</h3>
                
                <div class="mt-3 space-y-3">
                  <div class="p-3 border rounded-lg">
                    <div class="flex justify-between">
                      <h4 class="text-sm font-medium">Cultural Exchange Program</h4>
                      <span class="bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded">Upcoming</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Partner: Westfield School, UK • July 10 - August 5, 2025</p>
                    <div class="flex justify-between mt-2">
                      <span class="text-xs">12 students participating</span>
                      <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline">View details</a>
                    </div>
                  </div>
                  
                  <div class="p-3 border rounded-lg">
                    <div class="flex justify-between">
                      <h4 class="text-sm font-medium">Teacher Exchange Initiative</h4>
                      <span class="bg-indigo-100 text-indigo-700 text-xs px-2 py-0.5 rounded">Planning</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Partner: Springfield Academy, Canada • September 2025</p>
                    <div class="flex justify-between mt-2">
                      <span class="text-xs">4 teachers interested</span>
                      <a href="javascript:void(0)" class="text-xs text-indigo-600 hover:underline">View details</a>
                    </div>
                  </div>
                </div>
                
                <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-3">Create New Program</button>
              </div>
            </div>
          </div>
          
          <div class="volunteer-tab-content" data-tab="contacts">
            <div class="bg-white rounded-lg shadow p-4">
              <h3 class="font-medium text-gray-800">International Partners</h3>
              <p class="text-xs text-gray-500 mt-1">Restricted access - Director level only</p>
              
              <div class="mt-4 space-y-3">
                <div class="flex items-center p-2 border-b">
                  <div class="h-10 w-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                    <i class="fas fa-building text-indigo-600"></i>
                  </div>
                  <div class="flex-1">
                    <h4 class="text-sm font-medium">Westfield School</h4>
                    <p class="text-xs text-gray-500">London, UK • Active Partner</p>
                  </div>
                  <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition">
                    <i class="fas fa-envelope text-sm"></i>
                  </button>
                </div>
                
                <div class="flex items-center p-2 border-b">
                  <div class="h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                    <i class="fas fa-building text-blue-600"></i>
                  </div>
                  <div class="flex-1">
                    <h4 class="text-sm font-medium">Springfield Academy</h4>
                    <p class="text-xs text-gray-500">Toronto, Canada • Active Partner</p>
                  </div>
                  <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition">
                    <i class="fas fa-envelope text-sm"></i>
                  </button>
                </div>
                
                <div class="flex items-center p-2 border-b">
                  <div class="h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                    <i class="fas fa-building text-green-600"></i>
                  </div>
                  <div class="flex-1">
                    <h4 class="text-sm font-medium">Sakura High School</h4>
                    <p class="text-xs text-gray-500">Osaka, Japan • Prospective Partner</p>
                  </div>
                  <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition">
                    <i class="fas fa-envelope text-sm"></i>
                  </button>
                </div>
              </div>
              
              <div class="mt-4">
                <h3 class="font-medium text-gray-800">Key Contacts</h3>
                
                <div class="mt-2 space-y-2">
                  <div class="flex items-center p-2 bg-gray-50 rounded-lg">
                    <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-indigo-600">RW</span>
                    </div>
                    <div>
                      <h4 class="text-sm font-medium">Dr. Robert Williams</h4>
                      <p class="text-xs text-gray-500">Westfield School Director</p>
                    </div>
                  </div>
                  
                  <div class="flex items-center p-2 bg-gray-50 rounded-lg">
                    <div class="h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-blue-600">AM</span>
                    </div>
                    <div>
                      <h4 class="text-sm font-medium">Dr. Amanda Miller</h4>
                      <p class="text-xs text-gray-500">Springfield Academy Principal</p>
                    </div>
                  </div>
                  
                  <div class="flex items-center p-2 bg-gray-50 rounded-lg">
                    <div class="h-8 w-8 bg-green-100 rounded-full flex items-center justify-center mr-3">
                      <span class="font-bold text-green-600">KT</span>
                    </div>
                    <div>
                      <h4 class="text-sm font-medium">Mr. Kenji Tanaka</h4>
                      <p class="text-xs text-gray-500">Sakura High School Principal</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <button class="w-full py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition mt-4">Add New Contact</button>
            </div>
          </div>
        </div>
      </div>

                <div class="flex items-center p-2 bg-gray-50 rounded-lg">
                  <input type="checkbox" class="rounded text-indigo-600 mr-3">
                  <div class="flex-1">
                    <h4 class="text-sm font-medium">Send final reminder to parents</h4>
                    <p class="text-xs text-gray-500">Due by June 13</p>
                  </div>
                </div>
              </div>
              
              <div class="mt-3">
                <button class="flex items-center py-2 px-3 border border-dashed border-gray-300 rounded-lg w-full justify-center text-sm text-gray-500 hover:bg-gray-50">
                  <i class="fas fa-plus mr-2"></i> Add New Task
                </button>
              </div>
            </div>
          </div>
          
          <div class="events-tab-content" data-tab="attendance">
            <div class="bg-white rounded-lg shadow p-4 mb-4">
              <h3 class="font-medium text-gray-800 mb-3">Event Attendance</h3>
              
              <div class="mb-3">
                <label class="block text-sm text-gray-600 mb-1">Select Event</label>
                <select class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                  <option>Annual Sports Day (June 15, 2025)</option>
                  <option>Parent-Teacher Meeting (June 20, 2025)</option>
                  <option>Science Fair (June 28, 2025)</option>
                  <option>End of Term Ceremony (July 5, 2025)</option>
                </select>
              </div>
              
              <div class="flex justify-between items-center mt-4 mb-2">
                <h4 class="text-sm font-medium">Annual Sports Day</h4>
                <div class="flex space-x-2">
                  <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition">
                    <i class="fas fa-qrcode text-sm"></i>
                  </button>
                  <button class="p-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition">
                    <i class="fas fa-download text-sm"></i>
                  </button>
                </div>
              </div>
              
              <div class="grid grid-cols-2 gap-3 mb-3">
                <div class="p-3 bg-indigo-50 rounded-lg text-center">
                  <h4 class="text-lg font-bold text-indigo-700">425</h4>
                  <p class="text-xs text-gray-600">RSVPs</p>
                </div>
                
                <div class="p-3 bg-green-50 rounded-lg text-center">
                  <h4 class="text-lg font-bold text-green-700">0</h4>
                  <p class="text-xs text-gray-600">Checked In</p>
                </div>
              </div>
              
              <div class="relative">
                <input type="text" placeholder="Search attendees..." class="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
              </div>
            </div>
            
            <div class="bg-white rounded-lg shadow p-4">
              <h3 class="font-medium text-gray-800 mb-3">Quick Check-in</h3>
              
              <div class="mb-3">
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                  <i class="fas fa-qrcode text-gray-400 text-3xl mb-2"></i>
                  <p class="text-sm text-gray-500">Scan QR code or enter student/parent ID</p>
                  <button class="mt-3 px-4 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm">Scan QR Code</button>
                </div>
              </div>
              
              <div class="mt-4">
                <div class="flex justify-between mb-2">
                  <h4 class="text-sm font-medium">Recent Check-ins</h4>
                  <span class="text-xs text-gray-500">Event not started yet</span>
                </div>
                
                <div class="text-center text-sm text-gray-500 py-8">
                  <i class="fas fa-clipboard-list text-gray-300 text-3xl mb-2"></i>
                  <p>Attendees will appear here once they check in</p>
                </div>
              </div>
              
              <div class="mt-3 flex space-x-2">
                <button class="flex-1 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">Manual Check-in</button>
                <button class="flex-1 py-2 border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition">Mark Attendance</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Overlay for mobile when panel is active -->
    <div id="overlay" class="fixed inset-0 bg-black opacity-0 pointer-events-none transition-opacity z-10"></div>
  </div>

<script id="app-script">
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize Revenue Chart
      const revenueCtx = document.getElementById('revenueChart').getContext('2d');
      new Chart(revenueCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
          datasets: [{
            label: 'Fee Collection',
            data: [18500, 22000, 19800, 24500, 28000, 31500],
            borderColor: '#4f46e5',
            backgroundColor: 'rgba(79, 70, 229, 0.1)',
            borderWidth: 2,
            tension: 0.3,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return '$' + value.toLocaleString();
                }
              }
            }
          }
        }
      });

      // Toggle sidebar
      const sidebar = document.getElementById('sidebar');
      const toggleBtn = document.getElementById('toggle-sidebar');
      const sidebarExpanded = document.querySelectorAll('.sidebar-expanded');
      const sidebarCollapsed = document.querySelectorAll('.sidebar-collapsed');
      const workspace = document.querySelector('.workspace');
      
      toggleBtn.addEventListener('click', function() {
        if (sidebar.style.width === '64px') {
          sidebar.style.width = '180px';
          workspace.style.marginLeft = '180px';
          sidebarExpanded.forEach(el => el.classList.remove('hidden'));
          sidebarCollapsed.forEach(el => el.classList.add('hidden'));
        } else {
          sidebar.style.width = '64px';
          workspace.style.marginLeft = '64px';
          sidebarExpanded.forEach(el => el.classList.add('hidden'));
          sidebarCollapsed.forEach(el => el.classList.remove('hidden'));
        }
      });

      // Module panel functionality
      const modulePanel = document.getElementById('module-panel');
      const closeModuleBtn = document.getElementById('close-module');
      const moduleTitle = document.getElementById('module-title');
      const moduleContent = document.getElementById('module-content');
      const pageTitle = document.getElementById('page-title');
      const overlay = document.getElementById('overlay');
      
      // Close module panel
      closeModuleBtn.addEventListener('click', function() {
  modulePanel.classList.remove('active');
  overlay.classList.remove('opacity-50');
  overlay.classList.add('opacity-0');
  overlay.classList.add('pointer-events-none');
  // Show dashboard content again
  document.getElementById('dashboard-content').classList.add('active');
});
      // Handle module clicks
      const sidebarIcons = document.querySelectorAll('.sidebar-icon[data-module]');
      sidebarIcons.forEach(icon => {
        icon.addEventListener('click', function() {
          const module = this.getAttribute('data-module');
          
          // Deactivate all sidebar icons
          sidebarIcons.forEach(icon => icon.classList.remove('active'));
          
          // Activate clicked icon
          this.classList.add('active');
          
         if (module === 'dashboard') {
  // Show dashboard content
  modulePanel.classList.remove('active');
  overlay.classList.remove('opacity-50');
  overlay.classList.add('opacity-0');
  overlay.classList.add('pointer-events-none');
  pageTitle.textContent = 'SoMAP - SOCIETY MANAGEMENT APP';
  // Show the dashboard content and hide other module contents
  document.querySelectorAll('.module-content').forEach(content => {
    content.classList.remove('active');
  });
  document.getElementById('dashboard-content').classList.add('active');
} else {
  // Hide dashboard content when opening a module
  document.getElementById('dashboard-content').classList.remove('active');
  // Show module panel with appropriate content
  modulePanel.classList.add('active');
  overlay.classList.remove('opacity-0');
  overlay.classList.add('opacity-50');
  overlay.classList.remove('pointer-events-none');
  // Set the module title
  const moduleName = this.querySelector('.sidebar-tooltip').textContent;
  moduleTitle.textContent = moduleName;
  pageTitle.textContent = moduleName;
  // Get template content
  const templateId = `${module}-template`;
  const templateContent = document.getElementById(templateId).innerHTML;
  moduleContent.innerHTML = templateContent;
  // Initialize tab functionality for the loaded module
  initTabsForModule(module);
}
        });
      });

      // Initialize tabs for a loaded module
      function initTabsForModule(moduleType) {
        const tabButtons = document.querySelectorAll(`.${moduleType}-tab`);
        const tabContents = document.querySelectorAll(`.${moduleType}-tab-content`);
        
        tabButtons.forEach(button => {
          button.addEventListener('click', function() {
            const targetTab = this.getAttribute('data-tab');
            
            // Deactivate all tabs
            tabButtons.forEach(tab => tab.classList.remove('active', 'border-indigo-500', 'text-indigo-600'));
            tabButtons.forEach(tab => tab.classList.add('text-gray-500', 'hover:text-gray-700'));
            
            // Activate clicked tab
            this.classList.add('active', 'border-indigo-500', 'text-indigo-600');
            this.classList.remove('text-gray-500', 'hover:text-gray-700');
            
            // Show corresponding tab content
            tabContents.forEach(content => {
              if (content.getAttribute('data-tab') === targetTab) {
                content.classList.add('active');
              } else {
                content.classList.remove('active');
              }
            });
          });
        });
      }

      // Handle responsive behavior
      function handleResponsive() {
        if (window.innerWidth < 768) {
          sidebar.style.width = '64px';
          workspace.style.marginLeft = '64px';
          sidebarExpanded.forEach(el => el.classList.add('hidden'));
          sidebarCollapsed.forEach(el => el.classList.remove('hidden'));
          
          // Add overlay click to close panel on mobile
          overlay.addEventListener('click', function() {
            modulePanel.classList.remove('active');
            overlay.classList.remove('opacity-50');
            overlay.classList.add('opacity-0');
            overlay.classList.add('pointer-events-none');
          });
        }
      }

      // Initial call and window resize event
      handleResponsive();
      window.addEventListener('resize', handleResponsive);

      // Show dashboard by default
      document.querySelector('.sidebar-icon[data-module="dashboard"]').click();

      // Add sample API endpoints (these will be replaced with real APIs later)
      window.fetchStudents = function() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              message: "This is a prototype, continue building to see the full version.",
              students: []
            });
          }, 500);
        });
      };

      window.fetchPayments = function() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              message: "This is a prototype, continue building to see the full version.",
              payments: []
            });
          }, 500);
        });
      };

      window.fetchAttendance = function() {
        return new Promise(resolve => {
          setTimeout(() => {
            resolve({
              message: "This is a prototype, continue building to see the full version.",
              attendance: {}
            });
          }, 500);
        });
      };
    });
    </script>
<!-- jsPDF for PDF export -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- jsPDF autotable plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.0/jspdf.plugin.autotable.min.js"></script>
<!-- SheetJS for Excel/CSV export -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script>
// Initialize Firebase references
const db = firebase.database();

// Registration form logic
document.addEventListener('DOMContentLoaded', function() {
  // Attach submit event to registration form (modal)
  document.body.addEventListener('submit', async function(e) {
    if (e.target && e.target.id === 'registrationForm') {
      e.preventDefault();

      // Collect form data
      const form = e.target;
      const formData = new FormData(form);
      const student = {};
      formData.forEach((value, key) => student[key] = value);

      // Generate admission number
      student.admissionNumber = 'ADM' + Date.now();
      form.admissionNumber.value = student.admissionNumber;

      // Save to Firebase
      try {
        await db.ref('students').push(student);
        alert('Student registered successfully!');
        form.reset();
        form.admissionNumber.value = '';
        document.getElementById('registrationModal').classList.add('hidden');
        loadStudentsList(); // Refresh list
      } catch (err) {
        alert('Registration failed: ' + err.message);
      }
    }
  });
  // Load students list on page load
  loadStudentsList();
});
// Display students in a simple list under Quick Admission
function loadStudentsList() {
  // Find the admissions tab content
  const admissionsTab = document.querySelector('.erp-tab-content[data-tab="admissions"]');
  if (!admissionsTab) return;
  let list = admissionsTab.querySelector('#studentsList');
  if (!list) {
    list = document.createElement('div');
    list.id = 'studentsList';
    admissionsTab.appendChild(list);
  }
  db.ref('students').once('value').then(snap => {
    const data = snap.val() || {};
    let html = '<h4 class="font-medium mt-4 mb-2">Registered Students</h4>';
    if (Object.keys(data).length === 0) {
      html += '<div class="text-gray-500 text-sm">No students registered yet.</div>';
    } else {
      html += '<ul class="space-y-1">';
      Object.values(data).forEach(s => {
        html += `<li class="p-2 bg-gray-50 rounded mb-1">${s.firstName || ''} ${s.lastName || ''} <span class="text-xs text-gray-400">(${s.admissionNumber || ''})</span></li>`;
      });
      html += '</ul>';
    }
    list.innerHTML = html;
  });
}
// Show/hide registered students table
document.addEventListener('click', function(e) {
  // Toggle students table
  if (e.target && e.target.id === 'showStudentsBtn') {
    const panel = document.getElementById('module-panel');
    const studentsListPanel = panel.querySelector('#studentsListPanel');
    if (studentsListPanel.classList.contains('hidden')) {
      loadStudentsTable();
      studentsListPanel.classList.remove('hidden');
      e.target.textContent = 'Hide Registered Students';
    } else {
      studentsListPanel.classList.add('hidden');
      e.target.textContent = 'See Registered Students';
    }
  }
});

// Load students and show in a table
function loadStudentsTable() {
  const panel = document.getElementById('module-panel');
  const studentsListPanel = panel.querySelector('#studentsListPanel');
  db.ref('students').once('value').then(snap => {
    const data = snap.val() || {};
    let html = '<h4 class="font-medium mb-2">Registered Students</h4>';
    if (Object.keys(data).length === 0) {
      html += '<div class="text-gray-500 text-sm">No students registered yet.</div>';
    } else {
      html += `<div class="overflow-x-auto"><table class="min-w-full text-xs sm:text-sm border">
        <thead>
          <tr class="bg-gray-100">
            <th class="p-2 border">#</th>
            <th class="p-2 border">First Name</th>
            <th class="p-2 border">Last Name</th>
            <th class="p-2 border">Class</th>
            <th class="p-2 border">Gender</th>
            <th class="p-2 border">DOB</th>
            <th class="p-2 border">Admission No.</th>
            <th class="p-2 border">Parent</th>
            <th class="p-2 border">Contact</th>
          </tr>
        </thead>
        <tbody>`;
      let i = 1;
      Object.values(data).forEach(s => {
        html += `<tr>
          <td class="p-2 border">${i++}</td>
          <td class="p-2 border">${s.firstName || ''}</td>
          <td class="p-2 border">${s.lastName || ''}</td>
          <td class="p-2 border">${s.classLevel || ''}</td>
          <td class="p-2 border">${s.gender || ''}</td>
          <td class="p-2 border">${s.dob || ''}</td>
          <td class="p-2 border">${s.admissionNumber || ''}</td>
          <td class="p-2 border">${s.primaryParentName || ''}</td>
          <td class="p-2 border">${s.primaryParentContact || ''}</td>
        </tr>`;
      });
      html += `</tbody></table></div>`;
    }
    studentsListPanel.innerHTML = html;
  });
}
</script>
<script>
  document.querySelector('[data-module="erp"]').addEventListener('click', () => {
    window.location.href = 'schoolerp.html';
  });
</script>
<script>
  document.querySelector('[data-module="finance"]').addEventListener('click', () => {
    window.location.href = 'finance.html';
  });
</script>
</body>
</html>