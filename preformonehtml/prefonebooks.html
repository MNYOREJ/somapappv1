<!DOCTYPE html>
<html lang="en">
<head>
  <title>SoMAp â€” Preform One Books</title>
  <!-- Same -->
  <script src="prefonecommon.js"></script>
  <style> body { background: linear-gradient(to right, #667eea, #764ba2); } </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-400 to-purple-600 text-white p-4">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6"><i class="fas fa-book-open"></i> Preform One Digital Books</h1>
    <a href="prefonedashboard.html" class="bg-gray-500 p-2 rounded mb-4 inline-block">< Back</a>
    
    <input type="file" id="bookUpload" accept="application/pdf,image/*" multiple class="mb-4">
    <button onclick="uploadBooks()" class="bg-blue-500 p-2 rounded mb-4">Upload Books</button>
    
    <div id="booksList" class="grid grid-cols-3 gap-4"></div>
  </div>

  <script>
    function uploadBooks() {
      const files = document.getElementById('bookUpload').files;
      Array.from(files).forEach(file => {
        uploadToCloudinary(file, 'preformone/books').then(url => {
          db.ref(`/schools/Socrates School Preform one/${currentYear}/books`).push({ name: file.name, url, subject: 'General', uploaded: new Date().toISOString() });
          loadBooks();
        });
      });
    }
    
    function loadBooks() {
      db.ref(`/schools/Socrates School Preform one/${currentYear}/books`).once('value', snap => {
        const div = document.getElementById('booksList');
        div.innerHTML = Object.values(snap.val() || {}).map(b => 
          `<div class="bg-white/10 p-4 rounded"><a href="${b.url}" target="_blank" class="text-blue-300">${b.name}</a><br>Subject: ${b.subject}</div>`
        ).join('');
      });
    }
    
    loadBooks();
  </script>
</body>
</html>