<!DOCTYPE html>
<html lang="en">
<head>
  <title>SoMAp â€” Preform One Shifted Kids</title>
  <!-- Same -->
  <script src="prefonecommon.js"></script>
  <style> body { background: linear-gradient(to right, #667eea, #764ba2); } </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-400 to-purple-600 text-white p-4">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-6"><i class="fas fa-exchange-alt"></i> Preform One Shifted Kids</h1>
    <a href="prefonedashboard.html" class="bg-gray-500 p-2 rounded mb-4 inline-block">< Back</a>
    
    <table class="w-full bg-white/10 rounded">
      <thead><tr class="bg-white/20"><th>Name</th><th>Adm</th><th>Shift Date</th><th>Reason</th><th>Actions</th></tr></thead>
      <tbody id="shiftedBody"></tbody>
    </table>
  </div>

  <script>
    db.ref(`/schools/Socrates School Preform one/${currentYear}/students`).orderByChild('shifted').equalTo(true).once('value', snap => {
      const tbody = document.getElementById('shiftedBody');
      tbody.innerHTML = Object.entries(snap.val() || {}).map(([adm, s]) => 
        `<tr><td>${s.firstName} ${s.lastName}</td><td>${adm}</td><td>${s.shiftDate || 'Auto'}</td><td>${s.shiftReason || 'Absent >2 weeks'}</td>
        <td><button onclick="reactivate('${adm}')">Reactivate</button></td></tr>`
      ).join('');
    });
    
    function reactivate(adm) {
      db.ref(`/schools/Socrates School Preform one/${currentYear}/students/${adm}`).update({ shifted: false, shiftDate: null, shiftReason: null });
      location.reload();
    }
  </script>
</body>
</html>