{
  "rules": {
    ".read": false,
    ".write": false,

    "admins": {
      "$uid": {
        ".read": "auth != null && root.child('admins').child(auth.uid).val() === true",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
      }
    },

    "devices": {
      "$uid": {
        ".read": "auth != null && auth.uid === $uid",
        ".write": "auth != null && auth.uid === $uid"
      }
    },

    "workers_index_by_loginKey": {
      "$hash": {
        ".read": "auth != null",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
      }
    },

    "settings": {
      "workers": {
        ".read": "auth != null",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
      }
    },

    "workers": {
      "$workerId": {
        ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true",
        "contract": {
          ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)"
        }
      }
    },

    "attendance": {
      "$workerId": {
        "$month": {
          ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
          ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)"
        }
      }
    },

    "tasks": {
      "$workerId": {
        "$ymd": {
          ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
          ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)"
        }
      }
    },

    "leave_requests": {
      "$workerId": {
        "$requestId": {
          ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
          ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)"
        }
      }
    },

    "penalties_ledger": {
      "$workerId": {
        "$month": {
          ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        }
      }
    },

    "payroll_runs": {
      ".read": "auth != null && root.child('admins').child(auth.uid).val() === true",
      ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
    },

    "payslips": {
      "$workerId": {
        "$month": {
          ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        }
      }
    },

    "nssf": {
      "$workerId": {
        "$month": {
          ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        }
      }
    },

    "inventory": {
      "items": {
        ".read": "auth != null && root.child('admins').child(auth.uid).val() === true",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
      },
      "ledger": {
        ".read": "auth != null && root.child('admins').child(auth.uid).val() === true",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
      }
    },

    "roles": {
      "cook": {
        "daily": {
          "$ymd": {
            "$workerId": {
              ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
              ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)"
            }
          }
        }
      },
      "guard": {
        "handover": {
          "$ymd": {
            "$shift": {
              ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('workers').child(root.child('devices').child(auth.uid).child('workerId').val()).child('profile/role').val() === 'guard')",
              ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('workers').child(root.child('devices').child(auth.uid).child('workerId').val()).child('profile/role').val() === 'guard')"
            }
          }
        }
      },
      "cleaner": {
        "areas": {
          "$ymd": {
            "$workerId": {
              ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)",
              ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || root.child('devices').child(auth.uid).child('workerId').val() === $workerId)"
            }
          }
        }
      }
    },

    "approvals": {
      "$id": {
        ".read": "auth != null && root.child('admins').child(auth.uid).val() === true",
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
      }
    }
  }
}


