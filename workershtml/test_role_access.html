<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Role Access Test - SoMAp</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .role-selector {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    .role-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .role-btn.active {
      background: #4f46e5;
      color: white;
    }
    .role-btn:not(.active) {
      background: #e5e7eb;
      color: #374151;
    }
    .hub-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .hub-card {
      border: 3px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      background: #f8fafc;
    }
    .hub-card.enabled {
      border-color: #4f46e5;
      background: linear-gradient(135deg, #4f46e515, #4f46e525);
      cursor: pointer;
      transform: scale(1.02);
    }
    .hub-card.disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .hub-icon {
      font-size: 3rem;
      margin-bottom: 10px;
    }
    .hub-title {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .hub-desc {
      font-size: 0.9rem;
      color: #64748b;
      margin-bottom: 15px;
    }
    .status {
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: bold;
    }
    .status.enabled {
      background: #dcfce7;
      color: #166534;
    }
    .status.disabled {
      background: #fee2e2;
      color: #991b1b;
    }
  </style>
</head>
<body>
  <div class="test-card">
    <h1>🔐 SoMAp Role-Based Access Test</h1>
    <p>This demonstrates how the role-based hub access system works. Select different roles to see how access changes.</p>
    
    <div class="role-selector">
      <button class="role-btn active" data-role="cook">🍳 Cook</button>
      <button class="role-btn" data-role="guard">🛡️ Guard</button>
      <button class="role-btn" data-role="cleaner">🧹 Cleaner</button>
      <button class="role-btn" data-role="storekeeper">📦 Storekeeper</button>
      <button class="role-btn" data-role="driver">🚗 Driver</button>
      <button class="role-btn" data-role="teacher">📚 Teacher</button>
      <button class="role-btn" data-role="accountant">💰 Accountant</button>
      <button class="role-btn" data-role="manager">✅ Manager</button>
      <button class="role-btn" data-role="hr">👥 HR</button>
      <button class="role-btn" data-role="admin">⚙️ Admin</button>
    </div>
    
    <div id="currentRole" style="font-weight: bold; margin: 20px 0; padding: 10px; background: #e0e7ff; border-radius: 5px;">
      Current Role: Cook
    </div>
  </div>

  <div class="test-card">
    <h2>Work Hubs · Bwalo la Kazi</h2>
    <p>Each worker can only access their specific hub. Other hubs are visible but restricted.</p>
    
    <div class="hub-grid" id="hubsGrid">
      <!-- Hub cards will be generated here -->
    </div>
  </div>

  <script>
    const hubMap = {
      cook: { 
        title: 'COOKS HUB · Bwalo la Wapishi',
        sub: 'Manage daily kitchen operations, food reports, and inventory',
        icon: '🍳',
        color: '#f59e0b',
        roles: ['cook']
      },
      guard: { 
        title: 'MLINZI HUB · Bwalo la Walinzi',
        sub: 'Monitor security, handover procedures, and asset management',
        icon: '🛡️',
        color: '#ef4444',
        roles: ['guard']
      },
      cleaner: { 
        title: 'MSAFI HUB · Bwalo la Wasafi',
        sub: 'Daily cleaning checklist and supply management',
        icon: '🧹',
        color: '#10b981',
        roles: ['cleaner']
      },
      storekeeper: { 
        title: 'STORE HUB · Bwalo la Ghala',
        sub: 'Inventory management and stock tracking',
        icon: '📦',
        color: '#8b5cf6',
        roles: ['storekeeper']
      },
      driver: { 
        title: 'TRANSPORT HUB · Bwalo la Usafiri',
        sub: 'Vehicle management and route planning',
        icon: '🚗',
        color: '#06b6d4',
        roles: ['driver']
      },
      teacher: { 
        title: 'TASKS HUB · Bwalo la Kazi',
        sub: 'Daily teaching tasks and assignments',
        icon: '📚',
        color: '#3b82f6',
        roles: ['teacher']
      },
      accountant: { 
        title: 'PAYROLL HUB · Bwalo la Malipo',
        sub: 'Salary processing and financial management',
        icon: '💰',
        color: '#10b981',
        roles: ['accountant', 'admin', 'hr', 'manager']
      },
      manager: { 
        title: 'APPROVALS HUB · Bwalo la Uthibitisho',
        sub: 'Review and approve requests and incidents',
        icon: '✅',
        color: '#f59e0b',
        roles: ['manager', 'admin', 'hr']
      },
      hr: { 
        title: 'ADMISSION HUB · Bwalo la Kuajiri',
        sub: 'Employee registration and documentation',
        icon: '👥',
        color: '#8b5cf6',
        roles: ['hr', 'admin', 'manager']
      },
      admin: { 
        title: 'ADMIN HUB · Bwalo la Msimamizi',
        sub: 'System administration and controls',
        icon: '⚙️',
        color: '#6b7280',
        roles: ['admin']
      }
    };

    let currentRole = 'cook';

    function renderHubs(role) {
      const hubsGrid = document.getElementById('hubsGrid');
      hubsGrid.innerHTML = '';
      
      Object.entries(hubMap).forEach(([key, hub]) => {
        const hubCard = document.createElement('div');
        hubCard.className = 'hub-card';
        
        const canAccess = hub.roles.includes(role);
        
        if (canAccess) {
          hubCard.classList.add('enabled');
          hubCard.style.borderColor = hub.color;
          hubCard.style.background = `linear-gradient(135deg, ${hub.color}15, ${hub.color}25)`;
          
          hubCard.innerHTML = `
            <div class="hub-icon" style="color: ${hub.color};">${hub.icon}</div>
            <div class="hub-title" style="color: ${hub.color};">${hub.title}</div>
            <div class="hub-desc">${hub.sub}</div>
            <div class="status enabled">🚀 Access Granted</div>
          `;
          
          hubCard.addEventListener('click', () => {
            alert(`Accessing ${hub.title}...\n\nIn the real system, this would redirect to: ${key}.html`);
          });
        } else {
          hubCard.classList.add('disabled');
          
          hubCard.innerHTML = `
            <div class="hub-icon" style="color: #94a3b8;">${hub.icon}</div>
            <div class="hub-title" style="color: #64748b;">${hub.title}</div>
            <div class="hub-desc" style="color: #94a3b8;">Access restricted to ${hub.roles.join(', ')} only</div>
            <div class="status disabled">🔒 Access Restricted</div>
          `;
        }
        
        hubsGrid.appendChild(hubCard);
      });
    }

    // Role selector event listeners
    document.querySelectorAll('.role-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        // Update active button
        document.querySelectorAll('.role-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Update current role
        currentRole = btn.dataset.role;
        document.getElementById('currentRole').textContent = `Current Role: ${currentRole.charAt(0).toUpperCase() + currentRole.slice(1)}`;
        
        // Re-render hubs
        renderHubs(currentRole);
      });
    });

    // Initial render
    renderHubs(currentRole);
  </script>
</body>
</html>
